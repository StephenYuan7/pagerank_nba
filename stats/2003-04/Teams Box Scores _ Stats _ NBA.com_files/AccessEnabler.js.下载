var Adobe=AccessEnabler=function(s){function e(e){for(var t,n,o=e[0],r=e[1],i=0,a=[];i<o.length;i++)n=o[i],Object.prototype.hasOwnProperty.call(u,n)&&u[n]&&a.push(u[n][0]),u[n]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t]);for(c&&c(e);a.length;)a.shift()()}var n={},u={0:0};function l(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(r){var e,i,a,t,s,n,o=[],c=u[r];return 0!==c&&(c?o.push(c[2]):(e=new Promise(function(e,t){c=u[r]=[e,t]}),o.push(c[2]=e),(i=document.createElement("script")).charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.src=l.p+""+({}[n=r]||n)+".js",a=new Error,t=function(e){i.onerror=i.onload=null,clearTimeout(s);var t,n,o=u[r];0!==o&&(o&&(t=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,a.message="Loading chunk "+r+" failed.\n("+t+": "+n+")",a.name="ChunkLoadError",a.type=t,a.request=n,o[1](a)),u[r]=void 0)},s=setTimeout(function(){t({type:"timeout",target:i})},12e4),i.onerror=i.onload=t,document.head.appendChild(i))),Promise.all(o)},l.m=s,l.c=n,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e},l.h="d7dc7e35ce5bbc17ce8d",l.cn="AccessEnabler";var t=window.webpackJsonpAdobe_AccessEnabler=window.webpackJsonpAdobe_AccessEnabler||[],o=t.push.bind(t);t.push=e,t=t.slice();for(var r=0;r<t.length;r++)e(t[r]);var c=o;return l(l.s=14)}([function(e,t,n){"use strict";var o;(o={})[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var r=(i.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},i.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},i.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},i.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},i.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},i.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},i.prototype.setLevel=function(e){this.level=e,this.bindConsoleLog()},i.prototype.setPrefix=function(e){this.prefix="["+e+"]",this.bindConsoleLog()},i.prototype.bindConsoleLog=function(){if(console)for(var e in console){var t;console.hasOwnProperty(e)&&(t="function"==typeof console[e],this.logMethods.indexOf(e)>=this.level?this[e]=console[t?e:"log"].bind(window.console,this.prefix+"["+e.toString()+"]"):this[e]=function(){})}},i);function i(){this.level=2,this.prefix="",this.logMethods=["trace","debug","info","warn","error"],this.bindConsoleLog()}t.a=new r},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=(r.SESSION_COOKIE_NAME="ap_93",r.PENDING_AUTHENTICATION_COOKIE_NAME="pend_authn",r);function r(){}var i=(a.setSessionCookie=function(){document.cookie=o.SESSION_COOKIE_NAME+"="+(new Date).getTime()+";path=/"},a.isSessionCookieSet=function(){return-1!==document.cookie.indexOf(o.SESSION_COOKIE_NAME)},a.setPendingAuthenticationCookieState=function(e){document.cookie=!0===e?o.PENDING_AUTHENTICATION_COOKIE_NAME+"= ;expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/":o.PENDING_AUTHENTICATION_COOKIE_NAME+"= ;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"},a.isPendingAuthenticationCookieSet=function(){return-1!==document.cookie.indexOf(o.PENDING_AUTHENTICATION_COOKIE_NAME)},a);function a(){}},function(e,t,o){"use strict";(function(a){var h=o(7),p=o(8),s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,t=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function T(e){return(e||"").toString().replace(t,"")}var A=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function E(e){var t,n="undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{},o=n.location||{},r={},i=typeof(e=e||o);if("blob:"===e.protocol)r=new I(unescape(e.pathname),{});else if("string"==i)for(t in r=new I(e,{}),c)delete r[t];else if("object"==i){for(t in e)t in c||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=s.test(e.href))}return r}function f(e){e=T(e);var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function I(e,t,n){if(e=T(e),!(this instanceof I))return new I(e,t,n);var o,r,i,a,s,c,u=A.slice(),l=typeof t,d=this,g=0;for("object"!=l&&"string"!=l&&(n=t,t=null),n&&"function"!=typeof n&&(n=p.parse),t=E(t),o=!(r=f(e||"")).protocol&&!r.slashes,d.slashes=r.slashes||o&&t.slashes,d.protocol=r.protocol||t.protocol||"",e=r.rest,r.slashes||(u[3]=[/(.*)/,"pathname"]);g<u.length;g++)"function"!=typeof(a=u[g])?(i=a[0],c=a[1],i!=i?d[c]=e:"string"==typeof i?~(s=e.indexOf(i))&&(e="number"==typeof a[2]?(d[c]=e.slice(0,s),e.slice(s+a[2])):(d[c]=e.slice(s),e.slice(0,s))):(s=i.exec(e))&&(d[c]=s[1],e=e.slice(0,s.index)),d[c]=d[c]||o&&a[3]&&t[c]||"",a[4]&&(d[c]=d[c].toLowerCase())):e=a(e);n&&(d.query=n(d.query)),o&&t.slashes&&"/"!==d.pathname.charAt(0)&&(""!==d.pathname||""!==t.pathname)&&(d.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=n.length,r=n[o-1],i=!1,a=0;o--;)"."===n[o]?n.splice(o,1):".."===n[o]?(n.splice(o,1),a++):a&&(0===o&&(i=!0),n.splice(o,1),a--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(d.pathname,t.pathname)),h(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.split(":"),d.username=a[0]||"",d.password=a[1]||""),d.origin=d.protocol&&d.host&&"file:"!==d.protocol?d.protocol+"//"+d.host:"null",d.href=d.toString()}I.prototype={set:function(e,t,n){var o,r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||p.parse)(t)),r[e]=t;break;case"port":r[e]=t,h(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":t?(o="pathname"===e?"/":"#",r[e]=t.charAt(0)!==o?o+t:t):r[e]=t;break;default:r[e]=t}for(var i=0;i<A.length;i++){var a=A[i];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=p.stringify);var t,n=this,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var r=o+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}},I.extractProtocol=f,I.location=E,I.trimLeft=T,I.qs=p,e.exports=I}).call(this,o(4))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var c=n(0),u=n(1),l="c.a.p.pm.",o=(r.prototype.postMessage=function(e){this.target.postMessage(e,this.url.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},r.prototype.postStorage=function(o){for(var r=this,i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return new Promise(function(t){try{var n=l+"s."+r.getOpId();r.addEventListener(n,function(e){e.data.id===n&&(r.removeEventListener(e.data.id),t(e.data.result))});var e={id:n,operation:o,params:i};r.postMessage(e)}catch(e){c.a.error(e),t()}})},r.prototype.handleStorage=function(){var s=this;this.addEventListener("storage",function(e){if(e&&e.data&&e.data.id&&0===e.data.id.indexOf(l+"s.")&&e.data.operation&&e.data.params){var t={id:e.data.id},n=e.data.params;switch(e.data.operation){case"getItems":if(t.result={},s.isLocalStorageSpaceEnabled())for(var o=0,r=n;o<r.length;o++){var i=r[o],a=localStorage.getItem(i);null!==a&&(t.result[i]=a)}else t.result.error=!0,c.a.debug("Web localStorage is not available for 3rd parties for read operations");break;case"setItem":s.isLocalStorageSpaceEnabled()?2===n.length?localStorage.setItem(n[0],n[1]):c.a.error("Did not receive valid data to write!",n):c.a.debug("Web localStorage is not available for 3rd parties for write operations");break;case"isSessionCookieSet":t.result={isSessionCookieSet:u.a.isSessionCookieSet()};break;case"setSessionCookie":u.a.setSessionCookie();break;default:c.a.error("Unsupported storage operation: ",e.data.operation)}s.postMessage(t)}})},r.prototype.addEventListener=function(e,t){this.handlers[e]=t,window.addEventListener("message",t,!1)},r.prototype.removeEventListener=function(e){window.removeEventListener("message",this.handlers[e],!1),delete this.handlers[e]},r.prototype.getOpId=function(){return 1e3<r.opSeq&&(r.opSeq=0),+new Date+"."+r.opSeq++},r.prototype.isLocalStorageSpaceEnabled=function(){try{return localStorage.setItem("canWrite","test"),localStorage.removeItem("canWrite"),!0}catch(e){return!1}},r.opSeq=0,r);function r(e,t){void 0===e&&(e=null),void 0===t&&(t=parent),this.handlers={},this.url=e,this.target=t,this.handlers={}}},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t,n){if(e.forEach)e.forEach(t,n);else for(var o=0;o<e.length;o+=1)t.call(n,e[o],o,e)}},function(t,a,A){var E;!function(){"use strict";function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,o,r,i){return d((a=d(d(t,e),d(o,i)))<<(s=r)|a>>>32-s,n);var a,s}function g(e,t,n,o,r,i,a){return s(t&n|~t&o,e,t,r,i,a)}function h(e,t,n,o,r,i,a){return s(t&o|n&~o,e,t,r,i,a)}function p(e,t,n,o,r,i,a){return s(t^n^o,e,t,r,i,a)}function T(e,t,n,o,r,i,a){return s(n^(t|~o),e,t,r,i,a)}function c(e,t){var n,o,r,i;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a=1732584193,s=-271733879,c=-1732584194,u=271733878,l=0;l<e.length;l+=16)a=g(n=a,o=s,r=c,i=u,e[l],7,-680876936),u=g(u,a,s,c,e[l+1],12,-389564586),c=g(c,u,a,s,e[l+2],17,606105819),s=g(s,c,u,a,e[l+3],22,-1044525330),a=g(a,s,c,u,e[l+4],7,-176418897),u=g(u,a,s,c,e[l+5],12,1200080426),c=g(c,u,a,s,e[l+6],17,-1473231341),s=g(s,c,u,a,e[l+7],22,-45705983),a=g(a,s,c,u,e[l+8],7,1770035416),u=g(u,a,s,c,e[l+9],12,-1958414417),c=g(c,u,a,s,e[l+10],17,-42063),s=g(s,c,u,a,e[l+11],22,-1990404162),a=g(a,s,c,u,e[l+12],7,1804603682),u=g(u,a,s,c,e[l+13],12,-40341101),c=g(c,u,a,s,e[l+14],17,-1502002290),a=h(a,s=g(s,c,u,a,e[l+15],22,1236535329),c,u,e[l+1],5,-165796510),u=h(u,a,s,c,e[l+6],9,-1069501632),c=h(c,u,a,s,e[l+11],14,643717713),s=h(s,c,u,a,e[l],20,-373897302),a=h(a,s,c,u,e[l+5],5,-701558691),u=h(u,a,s,c,e[l+10],9,38016083),c=h(c,u,a,s,e[l+15],14,-660478335),s=h(s,c,u,a,e[l+4],20,-405537848),a=h(a,s,c,u,e[l+9],5,568446438),u=h(u,a,s,c,e[l+14],9,-1019803690),c=h(c,u,a,s,e[l+3],14,-187363961),s=h(s,c,u,a,e[l+8],20,1163531501),a=h(a,s,c,u,e[l+13],5,-1444681467),u=h(u,a,s,c,e[l+2],9,-51403784),c=h(c,u,a,s,e[l+7],14,1735328473),a=p(a,s=h(s,c,u,a,e[l+12],20,-1926607734),c,u,e[l+5],4,-378558),u=p(u,a,s,c,e[l+8],11,-2022574463),c=p(c,u,a,s,e[l+11],16,1839030562),s=p(s,c,u,a,e[l+14],23,-35309556),a=p(a,s,c,u,e[l+1],4,-1530992060),u=p(u,a,s,c,e[l+4],11,1272893353),c=p(c,u,a,s,e[l+7],16,-155497632),s=p(s,c,u,a,e[l+10],23,-1094730640),a=p(a,s,c,u,e[l+13],4,681279174),u=p(u,a,s,c,e[l],11,-358537222),c=p(c,u,a,s,e[l+3],16,-722521979),s=p(s,c,u,a,e[l+6],23,76029189),a=p(a,s,c,u,e[l+9],4,-640364487),u=p(u,a,s,c,e[l+12],11,-421815835),c=p(c,u,a,s,e[l+15],16,530742520),a=T(a,s=p(s,c,u,a,e[l+2],23,-995338651),c,u,e[l],6,-198630844),u=T(u,a,s,c,e[l+7],10,1126891415),c=T(c,u,a,s,e[l+14],15,-1416354905),s=T(s,c,u,a,e[l+5],21,-57434055),a=T(a,s,c,u,e[l+12],6,1700485571),u=T(u,a,s,c,e[l+3],10,-1894986606),c=T(c,u,a,s,e[l+10],15,-1051523),s=T(s,c,u,a,e[l+1],21,-2054922799),a=T(a,s,c,u,e[l+8],6,1873313359),u=T(u,a,s,c,e[l+15],10,-30611744),c=T(c,u,a,s,e[l+6],15,-1560198380),s=T(s,c,u,a,e[l+13],21,1309151649),a=T(a,s,c,u,e[l+4],6,-145523070),u=T(u,a,s,c,e[l+11],10,-1120210379),c=T(c,u,a,s,e[l+2],15,718787259),s=T(s,c,u,a,e[l+9],21,-343485551),a=d(a,n),s=d(s,o),c=d(c,r),u=d(u,i);return[a,s,c,u]}function u(e){for(var t="",n=32*e.length,o=0;o<n;o+=8)t+=String.fromCharCode(e[o>>5]>>>o%32&255);return t}function l(e){var t=[];for(t[(e.length>>2)-1]=void 0,o=0;o<t.length;o+=1)t[o]=0;for(var n=8*e.length,o=0;o<n;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return t}function o(e){for(var t,n="0123456789abcdef",o="",r=0;r<e.length;r+=1)t=e.charCodeAt(r),o+=n.charAt(t>>>4&15)+n.charAt(15&t);return o}function n(e){return unescape(encodeURIComponent(e))}function r(e){return u(c(l(t=n(e)),8*t.length));var t}function i(e,t){return function(e,t){var n,o,r=l(e),i=[],a=[];for(i[15]=a[15]=void 0,16<r.length&&(r=c(r,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^r[n],a[n]=1549556828^r[n];return o=c(i.concat(l(t)),512+8*t.length),u(c(a.concat(o),640))}(n(e),n(t))}function e(e,t,n){return t?n?i(t,e):o(i(t,e)):n?r(e):o(r(e))}void 0===(E=function(){return e}.call(a,A,a,t))||(t.exports=E)}()},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty;function a(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,o,r=[];for(o in"string"!=typeof t&&(t="?"),e)if(i.call(e,o)){if((n=e[o])||null!=n&&!isNaN(n)||(n=""),o=encodeURIComponent(o),n=encodeURIComponent(n),null===o||null===n)continue;r.push(o+"="+n)}return r.length?t+r.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,o={};t=n.exec(e);){var r=a(t[1]),i=a(t[2]);null===r||null===i||r in o||(o[r]=i)}return o}},,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"AccessEnabler",function(){return gt});var c=(n.AUTHENTICATION_ENDPOINT_PATH="/authenticate/saml?",n.AUTHENTICATION_TOKEN_ENDPOINT_PATH="/session",n.AUTHORIZATION_TOKEN_ENDPOINT_PATH="/authorize",n.MEDIA_TOKEN_ENDPOINT_PATH="/shortAuthorize",n.PREAUTHORIZATION_ENDPOINT_PATH="/preauthorize",n.LOGOUT_ENDPOINT_PATH="/logout?",n.DEVICE_ID_ENDPOINT_PATH="/getMetadata",n.USER_METADATA_ENDPOINT_PATH="/usermetadata",n.CONFIG_ENDPOINT_PATH="/config",n.INDIVIDUALIZATION_ENDPOINT_PATH="/indiv/devices",n.CLIENT_REGISTRATION_ENDPOINT_PATH="/o/client/register",n.ACCESS_TOKEN_ENDPOINT_PATH="/o/client/token",n.REG_CODE_ENDPOINT_PATH="/regcode",n.PASSIVE_AUTHENTICATION_REDIRECT_ENDPOINT_PATH="/completePassiveAuthentication",n.BACKGROUND_LOGIN_COMPLETE_PATH="completeBackgroundLogin.html",n.BACKGROUND_LOGOUT_COMPLETE_PATH="completeBackgroundLogout.html",n);function n(){}var u=(o.OPEN_IFRAME_STATUS_CALLBACK="openIFrame",o.DESTROY_IFRAME_STATUS_CALLBACK="destroyIFrame",o.NAVIGATE_TO_URL_STATUS_CALLBACK="navigateToURL",o.RELOAD_STATUS_CALLBACK="reload",o.DO_BACKGROUND_LOGOUT_STATUS_CALLBACK="doBackgroundLogout",o.ACCESS_ENABLER_LIBRARY_LOADED_STATUS_CALLBACK="entitlementLoaded",o.ACCESS_ENABLER_LIBRARY_DISPLAY_PROVIDER_DIALOG_STATUS_CALLBACK="displayProviderDialog",o.CONFIGURATION_STATUS_CALLBACK="setConfig",o.AUTHENTICATION_STATUS_CALLBACK="setAuthenticationStatus",o.AUTHORIZATION_SUCCESS_STATUS_CALLBACK="setToken",o.AUTHORIZATION_FAIL_STATUS_CALLBACK="tokenRequestFailed",o.PREAUTHORIZATION_STATUS_CALLBACK="preauthorizedResources",o.METADATA_STATUS_CALLBACK="setMetadataStatus",o.SEND_SELECTED_MVPD_STATUS_CALLBACK="selectedProvider",o.SEND_SELECTED_MVPD_PROXY_STATUS_CALLBACK="proxyMVPD",o.SEND_STORAGE_DATA_STATUS_CALLBACK="storageData",o.SEND_TRACKING_DATA_STATUS_CALLBACK="sendTrackingData",o.SEND_ADVANCED_STATUS_CALLBACK="errorEvent",o);function o(){}var l=(r.SERVER_API_TOO_OLD_ERROR_STATUS="API version too old. Please update your application.",r.USER_AUTHENTICATED_STATUS="User Authenticated",r.USER_NOT_AUTHENTICATED_ERROR_STATUS="User Not Authenticated Error",r.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS="Generic Authentication Error",r.USER_NOT_AUTHORIZED_ERROR_STATUS="User not Authorized Error",r.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS="Generic Authorization Error",r.USER_NOT_AUTHORIZED_NETWORK_ERROR_STATUS='A network error occurred when communicating with the provider"s authorization service',r.PROVIDER_NOT_SELECTED_ERROR_STATUS="Provider not Selected Error",r.PROVIDER_NOT_AVAILABLE_ERROR_STATUS="Provider Not Available Error",r.PROVIDER_ALREADY_AUTHENTICATED_INFO_STATUS="You are already authenticated with this Provider",r.TRACK_AUTHORIZATION_DETECTION="authorizationDetection",r.TRACK_AUTHENTICATION_DETECTION="authenticationDetection",r.TRACK_MVPD_SELECTION="mvpdSelection",r);function r(){}var s=(a.KEY_VISITOR_ID="ap_vi",a.KEY_AD_ID="ap_ai",a);function a(){}var d=(g.prototype.execute=function(){return this.functionName.apply(this.thisArg,this.functionParameters)},g);function g(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.thisArg=e,this.functionName=t,this.functionParameters=[],n&&(this.functionParameters=Array.isArray(n)?n:[n])}var h=i(0),p=(T.addGenericEventListener=function(e,t){window.addEventListener?window.addEventListener(e,t,!1):window.attachEvent("on"+e,t)},T.removeGenericEventListener=function(e,t){window.removeEventListener?window.removeEventListener(e,t,!1):window.detachEvent("on"+e,t)},T.receiveMessageEventHandler=function(e,t){var n;!e.origin||/auth.*\.adobe\.com/.test(e.origin)?(n=t[e.data])&&n.call(this):h.a.trace("Ignoring post message from origin "+e.origin)},T.createHiddenIframe=function(e,t){var n,o=document.getElementsByTagName("iframe");if(0<o.length)for(var r=0;r<o.length;r++)if(o[r].getAttribute("name")===e){n=o[r];break}n||((n=document.createElement("iframe")).setAttribute("name",e),n.setAttribute("id",e),n.setAttribute("style","display:none"),document.body.appendChild(n)),n.setAttribute("src",t)},T.openLoginWindow=function(n,o,r){setTimeout(function(){var e,t=window.open(n,o);T.isIE()&&(h.a.warn("Internet Explorer 11 or older detected: using a timer to handle login completion..."),e=setInterval(function(){t.closed&&(h.a.debug("Login window closed"),clearInterval(e),r())},200))},150)},T.convertServerDateToISO8601DateFormat=function(e){var t=e.split(" "),n=t[0],o=t[1],r=t[3],n=n.split("/").join("-"),i=r.length-2;return n+"T"+o+(r=r.substr(0,i)+":"+r.substr(i))},T.isIE=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/),t=!(!navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/));return e||t},T.isDebug=function(e){return-1!==document.cookie.indexOf("debug")||e&&e.hasOwnProperty("query")&&e.query.hasOwnProperty("debug")},T);function T(){}var A=(E.checkPendingLogout=function(e){if("string"==typeof e)return new RegExp("<pendingLogout.*>(s)*true(s)*</pendingLogout>").test(e);var t=!1;return S.getNode("pendingLogout",e)&&"true"===S.getNodeText("pendingLogout",e)&&(t=!0),t},E.getPendingLogoutReason=function(e){var t,n=null;return"string"==typeof e?n=(n=new RegExp('<pendingLogout reason="(.*)">true</pendingLogout>').exec(e))[1]?n[1]:null:(t=S.getNode("pendingLogout",e))&&"true"===S.getNodeText("pendingLogout",e)&&(n=t.attr("reason")),n},E);function E(){}var f=(I.parseXML=function(e){return e&&"string"==typeof e?(new DOMParser).parseFromString(e,"text/xml"):null},I);function I(){}var S=(_.getNodeText=function(e,t){return this._getNode(e,t,"textContent")},_.getNode=function(e,t){return this._getNode(e,t)},_.getNodes=function(e,t){return this._getNode(e,t,void 0,!0)},_.appendChild=function(e){"interactive"===document.readyState||"complete"===document.readyState?document.body.appendChild(e):(this.createDOMContentLoadedListener(),this.elementsToBeAppended.push(e))},_.createDOMContentLoadedListener=function(){var e,t=this;this.DOMContentLoadedListenerCreated||(this.DOMContentLoadedListenerCreated=!0,e=function(){for(;0<t.elementsToBeAppended.length;)document.body.appendChild(t.elementsToBeAppended.pop());document.removeEventListener?document.removeEventListener("DOMContentLoaded",e,!1):document.detachEvent("onDOMContentLoaded",e)},document.addEventListener?document.addEventListener("DOMContentLoaded",e,!1):document.attachEvent("onDOMContentLoaded",e))},_._getNode=function(e,t,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),t){var r=t.getElementsByTagName(e);if(0<r.length)return o?r:n?r[0][n]:r[0]}return""},_.elementsToBeAppended=[],_.DOMContentLoadedListenerCreated=!1,_);function _(){}function v(){this.r20=/%20/g,this.class2type={},this.rbracket=/\[\]$/,this.toString=this.class2type.toString}var m=new(v.prototype.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?this.class2type[this.toString.call(e)]||"object":typeof e},v.prototype.isFunction=function(e){return"function"===this.type(e)},v.prototype.buildParams=function(e,t,n){var o,r,i;if(Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&(i=t[r],this.rbracket.test(e)?n(e,i):this.buildParams(e+"["+("object"==typeof i?r:"")+"]",i,n));else if("object"===this.type(t))for(o in t)t.hasOwnProperty(o)&&this.buildParams(e+"["+o+"]",t[o],n);else n(e,t)},v),R=(y.param=function(e,t){var n,o;function r(e,t){t=m.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}void 0===t&&(t=!1);var i=[];if(Array.isArray(e))for(o in e)e.hasOwnProperty(o)&&r(o,e[o]);else for(n in e)e.hasOwnProperty(n)&&m.buildParams(n,e[n],r);var a=i.join("&").replace(m.r20,"+");return t&&(a=a.replace(/%5B%5D/g,"")),a},y);function y(){}var C=(O.get=function(){var e=this.findScript(document.getElementsByTagName("script"));return!e&&window.$&&(e=this.findScript($("script"))),(e=e||this.findUsingStackTraces())&&0<e.length?e:this.DEFAULT_SCRIPT_URL},O.findScript=function(e){for(var t,n=new RegExp("(.*)AccessEnabler.js(.*)"),o=0,r=e;o<r.length;o++){var i=r[o];if(i.src&&i.src.match(n)){t=i.src;break}}return t},O.findUsingStackTraces=function(){function t(e,t){n=t}var n,o="stack",r=o+"trace";try{throw new Error}catch(e){return"AccessEnabler.js"in e?n=e["AccessEnabler.js"]:r in e?e[r].replace(/called from line \d+, column \d+ in (.*):/gm,t):o in e&&e[o].replace(/at.*?\(?(\S+):\d+:\d+\)?$/g,t),n}},O.DEFAULT_SCRIPT_URL="https://entitlement.auth.adobe.com/entitlement/AccessEnabler.js",O);function O(){}var P=(N.extend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1;n<e.length;n++)for(var o in e[n])e[n].hasOwnProperty(o)&&(e[0][o]=e[n][o]);return e[0]},N.isEmpty=function(e){if(!e||N.isUndefined(e)||null===e)return!0;if(e.length)return!e.length;if(e.size)return!e.size;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},N.isUndefined=function(e){return void 0===e},N.inArray=function(e,t){if(t.indexOf)return t.indexOf(e);for(var n in t)if(t[n]===e)return n;return-1},N);function N(){}var b=i(5),D=(k.prototype.getMvpds=function(){var o=this;return this.mvpds||(this.mvpds=[],b(S.getNodes(this.MVPD,this.config),function(e){var t=S.getNodeText(o.MVPD_ID,e),n={id:t,displayName:o.extractMvpdConfig(o.MVPD_DISPLAY_NAME,t,e,!1),logoUrl:o.extractMvpdConfig(o.MVPD_LOGO_URL,t,e,!1),authPerAggregator:o.extractMvpdConfig(o.MVPD_AUTH_PER_AGGREGATOR,t,e,!0),passiveAuthnEnabled:o.extractMvpdConfig(o.MVPD_PASSIVE_AUTHN,t,e,!0,!0),authPerBrowserSession:o.extractMvpdConfig(o.MVPD_AUTH_PER_BROWER_SESSION,t,e,!0),iFrameRequired:o.extractMvpdConfig(o.MVPD_IFRAME_REQUIRED,t,e,!0),tempPass:S.getNodeText(o.TEMP_PASS,e).toLowerCase()===o.TRUE};n.iFrameRequired&&(n.iFrameHeight=o.extractMvpdConfig(o.MVPD_IFRAME_HEIGHT,t,e,!1),n.iFrameWidth=o.extractMvpdConfig(o.MVPD_IFRAME_WIDTH,t,e,!1)),o.mvpds.push(n)})),this.mvpds},k.prototype.getConfigForProgrammer=function(){var t=null;if(this.config&&this.config.documentElement){var n=this.config.documentElement.cloneNode(!0);if(this.removeNonVisibleNode(n))if(void 0!==window.XMLSerializer)try{t=(new XMLSerializer).serializeToString(n)}catch(e){t=n.xml}else t=n.xml}return t},k.prototype.removeNonVisibleNode=function(e){var t=!1;return e.getAttribute(this.ATTR_VISIBLE)===this.VISIBLE_TRUE?(e.removeAttribute(this.ATTR_VISIBLE),t=!0):e.hasChildNodes()&&(t=this.removeNonVisibleChildNodes(e))&&this.removeAttributes(e),t},k.prototype.removeNonVisibleChildNodes=function(e){for(var t=!1,n=e.childNodes,o=0;o<n.length;o++){var r=n[o];1===r.nodeType&&(this.removeNonVisibleNode(r)?t=!0:(e.removeChild(r),o--))}return t},k.prototype.removeAttributes=function(e){for(var t=e.attributes.length-1;0<=t;t--){var n=e.attributes.item(t);e.removeAttributeNode(n)}},k.prototype.extractMvpdConfig=function(e,t,n,o,r){void 0===r&&(r=null);var i,a=ut.context.clientInfo&&ut.context.clientInfo.getMvpdConfig()?ut.context.clientInfo.getMvpdConfig():{},s=null!==a[t]&&void 0!==a[t]&&null!==a[t][e]&&void 0!==a[t][e],c=S.getNode(e,n);return s?(i=a[t][e],c&&(c.textContent=i),i):null!=(i=S.getNodeText(e,n))&&""!==i||void 0===r?o?i===this.TRUE:i:r},k);function k(e){this.TRUE="true",this.ATTR_VISIBLE="visible",this.VISIBLE_TRUE="true",this.MVPD="mvpd",this.MVPD_ID="id",this.MVPD_LOGO_URL="logoUrl",this.MVPD_DISPLAY_NAME="displayName",this.MVPD_AUTH_PER_AGGREGATOR="authPerAggregator",this.MVPD_PASSIVE_AUTHN="passiveAuthnEnabled",this.MVPD_AUTH_PER_BROWER_SESSION="authPerBrowserSession",this.MVPD_IFRAME_REQUIRED="iFrameRequired",this.MVPD_IFRAME_HEIGHT="iFrameHeight",this.MVPD_IFRAME_WIDTH="iFrameWidth",this.TEMP_PASS="tempPass",this.mvpds=null,this.config=e}var x="warning",M="error",U="info",L=(w.Z500=function(e){return{errorId:"Z500",level:M,resource:e}},w.Z010=function(e){return{errorId:"Z010",level:x,resource:e}},w.Z011=function(e){return{errorId:"Z011",level:U,resource:e}},w.Z100=function(e,t){return{errorId:"Z100",level:M,message:e,resource:t}},w.Z110=function(e,t){return{errorId:"Z110",level:M,message:e,resource:t}},w.Z120=function(e){return{errorId:"Z120",level:M,message:"network error",resource:e}},w.Z130=function(e,t){return{errorId:"Z130",level:M,message:""===e?"invalid resource":e,resource:t}},w.Z169=function(e,t){return{errorId:"Z169",level:M,message:e,resource:t}},w.IS2XX=function(e,t){return{errorId:e,level:M,message:t}},w.buildError=function(e,t,n,o,r){return void 0===t&&(t=M),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r={}),r.level=t,n&&(r.message=n),o&&(r.subErrorId=o),P.extend({errorId:e},r)},w.fromAuthzErrorResponse=function(e,t){if("code"in e&&"message"in e)h.a.warn("Received a non xhr object!"),i=e;else{if(!e.responseText)return w.Z120(t);var n=e.responseText.split("details")[1];n&&2<n.length&&(n=n.substring(1,n.length-2));var o=e.getResponseHeader("Authzf-error-code"),r=e.getResponseHeader("Authzf-sub-error-code"),i=r&&"1010"===r?{code:l.USER_NOT_AUTHORIZED_ERROR_STATUS,subErrorCode:r,message:n}:{code:l.USER_NOT_AUTHORIZED_ERROR_STATUS,shortErrorCode:o,message:n}}if("authzNone"===i.shortErrorCode)return w.Z169(i.message,t);if("invalid"===i.shortErrorCode)return w.Z130(i.message,t);if("1010"===i.subErrorCode)return w.Z110(i.message,t);switch(i.code){case l.USER_NOT_AUTHORIZED_ERROR_STATUS:switch(i.message){case l.USER_NOT_AUTHORIZED_NETWORK_ERROR_STATUS:return w.Z120(t);default:return w.Z100(i.message,t)}case l.USER_NOT_AUTHENTICATED_ERROR_STATUS:return w.N000;default:return w.Z500(t)}},w.getReasonFromErrorResponse=function(e){var t,n=null,o="<reason>",r=e.indexOf(o);return 0<=r&&0<=(t=e.indexOf("</reason>"))&&(n=e.substring(r+o.length,t)),n},w.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS="MISSING_REQUIRED_PREREQUISITES",w.PREFIX_IS="IS",w.PREFIX_CFG="CFG",w.SEC420={errorId:"SEC420",level:M},w.SEC412={errorId:"SEC412",level:x},w.CFG100={errorId:"CFG100",level:x,message:"incorrect time"},w.R400={errorId:"R400",level:M,message:"application is not registered"},w.R401={errorId:"R401",level:M,message:"error fetching access token"},w.REG500={errorId:"REG500",level:M,message:"error fetching registration code"},w.N000={errorId:"N000",level:U,message:"user not authenticated"},w.N010={errorId:"N010",level:x},w.N011={errorId:"N011",level:U,message:"authenticated with temp pass"},w.N111={errorId:"N111",level:x},w.N005={errorId:"N005",level:U,message:"authentication cancelled"},w.N001={errorId:"N001",level:U,message:"passive authentication"},w.N404={errorId:"N404",level:M,message:"resource unavailable"},w.N002={errorId:"N002",level:M,message:"passive authentication not supported"},w.N500={errorId:"N500",level:M},w.N130={errorId:"N130",level:M},w.LS011={errorId:"LS011",level:x,message:"using volatile storage"},w.P100={errorId:"P100",level:M},w);function w(){}var H=(G.prototype.getAuthorizedResourceID=function(){return h.a.debug("Entered - AuthorizedResource::getAuthorizedResourceID()"),this.xmlElement?this.xmlElement.getAttribute("simpleResourceID"):null},G);function G(e){this.xmlElement=e}var z=(K.prototype.getSource=function(){return this.source},K.prototype.getExpiryDate=function(){if(o=this.getProperty("simpleTokenExpires"))o=new Date(p.convertServerDateToISO8601DateFormat(o));else{var e=void 0,t=this.getProperty("issueTime");if(t){e=this.getProperty("ttl");var n=new Date(p.convertServerDateToISO8601DateFormat(t)).getTime(),o=new Date(n+e)}else{if(!(e=this.getProperty("simpleTokenTTL")))throw{message:"Invalid token format."};o=new Date(p.convertServerDateToISO8601DateFormat(e))}}return o},K.prototype.isExpired=function(){try{return this.getExpiryDate().getTime()<(new Date).getTime()}catch(e){return h.a.error(e.message),!1}},K.prototype.isValid=function(){try{var e=!this.isExpired();return e&&this.isAuthZAll()&&(e=ut.context.requestorId===this.getRequestorID()),e}catch(e){return h.a.error(e.message),!1}},K.prototype.isAuthNAll=function(){var e=this.getProperty("simpleTokenAuthenticationGuid");return"d35b501e0385360feccc755c59f5767b46c54c7d"===e||0===e.indexOf("95cf93bcd183214a")},K.prototype.isAuthZAll=function(){return"true"===this.getProperty("zAll")},K.prototype.getProperty=function(e){return S.getNodeText(e,this.xmlData)},K.prototype.getRequestorID=function(){return this.getProperty("simpleTokenRequestorID")},K.prototype.getResourceID=function(){var e=this.getProperty("simpleTokenResourceID");return e||this.getProperty("resourceID")},K.prototype.getMvpdID=function(){return this.getProperty("simpleTokenMsoID")},K.prototype.getSubMVPDID=function(){return this.getProperty("simpleTokenSubMvpdID")},K.prototype.getAuthorizedResources=function(){h.a.trace("Entered - Token::getAuthorizedResources()");var e=new Array(0);if(this.xmlData)for(var t=this.xmlData.getElementsByTagName("simpleAuthorizedResource"),e=new Array(t.length),n=0;n<e.length;n++){var o=new H(t[n]);e[n]=o}return e},K);function K(e){this.source=e,this.xmlData=f.parseXML(e.split("<signatureInfo>")[2])}var F=(V.prototype.setItem=function(e,t){this.memoryStorageContent[e]=t},V.prototype.getItem=function(e){return this.memoryStorageContent[e]},V.prototype.removeItem=function(e){delete this.memoryStorageContent[e]},V);function V(){this.memoryStorageContent={}}var B=(q.AUTHN_TOKEN="authenticationToken",q.AUTHZ_TOKEN="authorizationToken",q.USER_METADATA="userMeta",q.MVPD="mvpd",q.MVPD_SELECTION="mvpdSelection",q.CAN_AUTHN="canAuthenticate",q.PREAUTHORIZATION_CACHE="preauthorizationCache",q);function q(){}var Y=(j.UNKNOWN_SELECTION="unknown",j.USER_SELECTION="user",j.REMEMBERED_SELECTION="remembered",j.AUTO_SELECTION="auto-client",j);function j(){}var Z=(Q.prototype.setAuthenticationTokens=function(e){this.authenticationToken=e},Q.prototype.getAuthenticationTokens=function(){return this.authenticationToken},Q.prototype.setAuthorizationTokens=function(e){this.authorizationToken=e},Q.prototype.getAuthorizationTokens=function(){return this.authorizationToken},Q.prototype.setUserMetadata=function(e){this.userMeta=e},Q.prototype.getUserMetadata=function(){return this.userMeta},Q.prototype.setMvpdID=function(e){this.mvpd=e},Q.prototype.getMvpdID=function(){return this.mvpd},Q.prototype.setMvpdSelection=function(e){this.mvpdSelection=e},Q.prototype.getMvpdSelection=function(){return this.mvpdSelection},Q.prototype.setCanAuthenticate=function(e){this.canAuthenticate=e},Q.prototype.getCanAuthenticate=function(){return this.canAuthenticate},Q.prototype.setPreauthorizationCache=function(e){this.preauthorizationCache=e},Q.prototype.getPreauthorizationCache=function(){return this.preauthorizationCache},Q.prototype.loadEntitlementTokenFromJSONObject=function(e){this.authenticationToken=e[B.AUTHN_TOKEN],this.authorizationToken=e[B.AUTHZ_TOKEN],this.userMeta=e[B.USER_METADATA],this.mvpd=e[B.MVPD],this.canAuthenticate=e[B.CAN_AUTHN],this.preauthorizationCache=e[B.PREAUTHORIZATION_CACHE],e[B.MVPD_SELECTION]?this.mvpdSelection=e[B.MVPD_SELECTION]:this.mvpd?this.mvpdSelection=Y.USER_SELECTION:this.mvpdSelection=Y.UNKNOWN_SELECTION},Q.prototype.isEntitlementTokenContentValid=function(){return this&&!P.isUndefined(this.authenticationToken)&&!P.isUndefined(this.authorizationToken)&&!P.isUndefined(this.mvpd)&&!P.isUndefined(this.mvpdSelection)&&!P.isUndefined(this.canAuthenticate)&&Array.isArray(this.authenticationToken)&&Array.isArray(this.authorizationToken)},Q);function Q(){this.authenticationToken=[],this.authorizationToken=[],this.userMeta={},this.mvpd=null,this.mvpdSelection=Y.UNKNOWN_SELECTION,this.canAuthenticate=!1,this.preauthorizationCache=[]}var J=i(1),W=(X.getInstance=function(){return this.instance||(this.instance=new X),this.instance},X.prototype.setCurrentMvpdID=function(e){this.switchToCurrentMvpdStorageType(e),this.storageManager.clearStorage(e!==this.getCurrentMvpdID()),this.storageManager.setMvpdID(e)},X.prototype.getCurrentMvpdID=function(){return this.storageManager.getMvpdID()},X.prototype.getMvpdByID=function(e){return!P.isEmpty(this.mvpds)&&this.mvpds.hasOwnProperty(e)?this.mvpds[e]:null},X.prototype.isMvpdValid=function(e){var t=this.getMvpdByID(e);return!!t&&t.id===e},X.prototype.switchToCurrentMvpdStorageType=function(e){var t;!e||(t=this.getMvpdByID(e))&&(t.authPerBrowserSession?this.storageManager.switchToSessionStorage():this.storageManager.switchToLocalStorage())},X.prototype.getCurrentMvpd=function(){var e=null,t=this.getCurrentMvpdID();return t&&(e=this.getMvpdByID(t)),e},X.prototype.addMvpds=function(e){if(e&&0<e.length)for(var t=0,n=e;t<n.length;t++){var o=n[t];this.mvpds.hasOwnProperty(o.id)||(this.mvpds[o.id]=o)}},X.prototype.getCurrentSP=function(){var e=null,t=this.getCurrentMvpdID();return t&&this.getMvpdByID(t)&&(e=this.getMvpdByID(t).serviceProvider),e},X.prototype.getRequestorMVPDs=function(){return this.mvpds},X.prototype.clearRequestorMVPDs=function(){this.mvpds={}},X);function X(){this.mvpds={},this.storageManager=Ue.getInstance()}var ee=i(3),te=(ne.CLIENT_CREDENTIALS="client_credentials",ne);function ne(){}var oe=(re.CLIENT_ID="client_id",re.CLIENT_SECRET="client_secret",re.GRANT_TYPES="grant_types",re.REDIRECT_URI="redirect_uris",re.CREATED_AT="client_id_issued_at",re);function re(){}var ie=(ae.prototype.getClientId=function(){return this.clientId},ae.prototype.getClientSecret=function(){return this.clientSecret},ae.prototype.isValid=function(){return this&&null!=this.clientId&&null!=this.clientSecret&&null!=this.grantTypes&&null!=this.redirectURI&&null!=this.createdAt},ae.prototype.copyFromJSONObject=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},ae);function ae(e){if(this.clientId=null,this.clientSecret=null,this.grantTypes=null,this.redirectURI=null,this.createdAt=null,e)try{var t=JSON.parse(e);this.clientId=t[oe.CLIENT_ID],this.clientSecret=t[oe.CLIENT_SECRET],this.grantTypes=t[oe.GRANT_TYPES],this.redirectURI=t[oe.REDIRECT_URI],this.createdAt=t[oe.CREATED_AT]}catch(e){h.a.error("Application registration response data has invalid JSON format!")}}var se=(ce.ACCESS_TOKEN="access_token",ce.EXPIRES_IN="expires_in",ce.TOKEN_TYPE="token_type",ce.CREATED_AT="created_at",ce);function ce(){}var ue=(le.prototype.getAccessToken=function(){return this.accessToken},le.prototype.isValid=function(){return this&&null!=this.accessToken&&null!=this.tokenType&&null!=this.createdAt&&null!=this.expiresIn&&(new Date).getTime()<this.createdAt+1e3*this.expiresIn},le.prototype.copyFromJSONObject=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},le);function le(e){if(this.accessToken=null,this.expiresIn=null,this.tokenType=null,this.createdAt=null,e)try{var t=JSON.parse(e);this.accessToken=t[se.ACCESS_TOKEN],this.expiresIn=t[se.EXPIRES_IN],this.tokenType=t[se.TOKEN_TYPE],this.createdAt=t[se.CREATED_AT]}catch(e){h.a.error("Access token response data has invalid JSON format!")}}var de=(ge.ID="id",ge.CODE="code",ge.REQUESTOR="requestor",ge.MVPD="mvpd",ge.GENERATED="generated",ge.EXPIRES="expires",ge.INFO="info",ge);function ge(){}var he=(pe.prototype.getCode=function(){return this.code},pe.prototype.isValid=function(){return this&&null!=this.id&&null!=this.code&&null!=this.requestor&&null==this.mvpd&&null!=this.generated&&null!=this.expires&&null!=this.info&&(new Date).getTime()<this.expires},pe.prototype.copyFromJSONObject=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},pe);function pe(e){if(this.id=null,this.code=null,this.requestor=null,this.mvpd=null,this.generated=null,this.expires=null,this.info=null,e)try{var t=JSON.parse(e);this.id=t[de.ID],this.code=t[de.CODE],this.requestor=t[de.REQUESTOR],this.mvpd=t[de.MVPD],this.generated=t[de.GENERATED],this.expires=t[de.EXPIRES],this.info=t[de.INFO]}catch(e){h.a.error("Registration Code response data has invalid JSON format!")}}var Te=(Ae.createEmptyDataObject=function(e){switch(e){case De.APPLICATION_REGISTRATION:return new ie;case De.ACCESS_TOKEN:return new ue;case De.REG_CODE:return new he;default:return null}},Ae);function Ae(){}var Ee=i(6),fe=(Ie.getInstance=function(){return this.instance||(this.instance=new Ie),this.instance},Ie.prototype.getFingerprint=function(){var n=this;return new Promise(function(t){Promise.all([i.e(3),i.e(4)]).then(function(){try{(new(i(16).Fingerprint)).get(function(e){h.a.debug("Fingerprinting result ",e),t(e)})}catch(e){h.a.error("Error calculating fingerprint!",e),t(n.defaultFingerprint)}}.bind(null,i)).catch(function(e){h.a.error("Error loading fingerprint library",e),h.a.debug("Using default fingerprinting value ",n.defaultFingerprint),t(n.defaultFingerprint)})})},Ie);function Ie(){this.defaultFingerprint=Ee(navigator.userAgent)}var Se=i(2),_e=(ve.prototype.getIndividualizationData=function(){var s=this;return new Promise(function(i,a){s.fingerprintService.getFingerprint().then(function(e){s.httpService.post(c.INDIVIDUALIZATION_ENDPOINT_PATH,{fingerprint:e},{url:new Se(ut.context.spAdobeServicesUrl,null,!0).origin}).then(function(t){try{for(var e=JSON.parse(t.data),n=0,o=s.REQUIRED_INDIVIDUALIZATION_KEYS;n<o.length;n++)if(!e[o[n]])return void a(L.IS2XX(""+L.PREFIX_IS+t.status,"Missing Individualization Key Error"));var r=t.xhr&&t.xhr.responseHeaders?t.xhr.responseHeaders:[];i({iid:e[s.INDIVIDUALIZATION_DEVICE_ID_KEY],sfp:r.pass_sfp})}catch(e){a(L.IS2XX(""+L.PREFIX_IS+t.status,"Invalid Individualization Data Error"))}},function(e){a(L.buildError(""+L.PREFIX_IS+e.status))})})})},ve);function ve(){this.INDIVIDUALIZATION_DEVICE_ID_KEY="deviceId",this.REQUIRED_INDIVIDUALIZATION_KEYS=[this.INDIVIDUALIZATION_DEVICE_ID_KEY],this.fingerprintService=fe.getInstance(),this.httpService=Ve.getInstance()}var me=(Re.getInstance=function(){return this.instance||(this.instance=new Re),this.instance},Re.prototype.getDeviceInfo=function(){return{ap_42:navigator.vendor?navigator.vendor:"anonymous",ap_11:navigator.platform,ap_z:navigator.userAgent}},Re.prototype.getDeviceId=function(){var o=this;return new Promise(function(t,n){var e=o.storageManager.getDeviceId();e?t(e):o.individualizationService.getIndividualizationData().then(function(e){o.storageManager.setDeviceId(e.iid),o.storageManager.setSFP(e.sfp),t(e.iid)},function(e){n(e)})})},Re);function Re(){this.storageManager=Ue.getInstance(),this.individualizationService=new _e}var ye=i(2),Ce=(Oe.getInstance=function(){return this.instance||(this.instance=new Oe),this.instance},Oe.prototype.obtainRegCode=function(o){var r=this;return new Promise(function(t,n){var e=r.storageManager.getRegCode();e?t(e):r.retrieveRegCode(o).then(function(e){t(e)},function(e){n(e)})})},Oe.prototype.retrieveRegCode=function(i){var a=this;return new Promise(function(n,t){function o(e){var t=new he(e.data);a.storageManager.setRegCode(t),n(t)}function r(e){400!==e.status&&401!==e.status&&Oe.RETRY_RETRIEVING_REG_CODE?(Oe.RETRY_RETRIEVING_REG_CODE=!1,a.retrieveRegCode(i).then(function(e){n(e)},function(e){t(e)})):e.status===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?t(e.data):t(L.REG500)}a.identificationManager.getDeviceId().then(function(e){a.httpService.post("/reggie/v1/"+i+c.REG_CODE_ENDPOINT_PATH,{requestor:i,deviceId:e,format:"json"},{url:new ye(ut.context.spAdobeServicesUrl,null,!0).origin,dataType:"application/x-www-form-urlencoded"}).then(o,r)},function(e){t(e)})})},Oe.RETRY_RETRIEVING_REG_CODE=!0,Oe);function Oe(){this.httpService=Ve.getInstance(),this.storageManager=Ue.getInstance(),this.identificationManager=me.getInstance()}var Pe=i(2),Ne=(be.prototype.getClientAuthenticationStatus=function(){var e=ut.context.storageManager.getAuthenticationToken();return e&&e.isValid()?ut.context.mvpdManager.isMvpdValid(e.getMvpdID())?l.USER_AUTHENTICATED_STATUS:l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS:ut.context.validRequestorId?l.USER_NOT_AUTHENTICATED_ERROR_STATUS:l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS},be.prototype.startInteractiveAuthentication=function(){if(h.a.debug("User interactive authentication in progress!"),ut.context.interactiveAuthenticationInProgress=!0,ut.context.storageManager.getCanAuthenticate())ut.context.storageManager.setMvpdSelection(Y.REMEMBERED_SELECTION),ut.context.storageManager.setCanAuthenticate(!1),this.goToMvpdLoginPage();else{ut.context.storageManager.setCanAuthenticate(!1);var e,t=[],n=ut.context.mvpdManager.getRequestorMVPDs();for(var o in n)n.hasOwnProperty(o)&&(e=n[o],t.push({ID:e.id,displayName:e.displayName,logoURL:e.logoUrl}));0<t.length?ut.context.callbackManager.callCallback(u.ACCESS_ENABLER_LIBRARY_DISPLAY_PROVIDER_DIALOG_STATUS_CALLBACK,t):(this.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS,L.N500),this.authenticationGeneralCleanup())}},be.prototype.startNonInteractiveAuthentication=function(e){h.a.debug("User non-interactive authentication in progress!"),ut.context.nonInteractiveAuthenticationInProgress=!0,ut.context.mvpdManager.setCurrentMvpdID(e),ut.context.storageManager.setMvpdSelection(Y.AUTO_SELECTION),ut.context.callbackManager.sendTrackingData(l.TRACK_MVPD_SELECTION),ut.context.mvpdManager.getMvpdByID(e).passiveAuthnEnabled?(ut.context.storageManager.setCanAuthenticate(!1),this.startPassiveAuthentication()):(this.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS,L.N002),this.authenticationGeneralCleanup())},be.prototype.startPassiveAuthentication=function(){var t=this;h.a.debug("Starting passive authentication!"),ut.context.backgroundLoginInProgress=ut.context.clientInfo&&ut.context.clientInfo.isBackgroundLogin(),ut.context.userProfileService.buildAuthenticationUrl(!0,ut.context.mvpdManager.getCurrentMvpd(),ut.context.authenticationExtraParameters,!1).then(function(e){p.createHiddenIframe("com_adobe_pass_passive_authn",e),ut.context.passiveAuthenticationTimer=setTimeout(function(){ut.context.nonInteractiveAuthenticationInProgress?(t.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS,L.N002),t.authenticationGeneralCleanup()):(ut.context.passiveAuthenticationTimer=null,ut.context.configurationService.onConfigurationInitializedComplete())},ut.context.passiveAuthenticationTimerMilliseconds)},function(e){ut.context.nonInteractiveAuthenticationInProgress&&(t.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS,e.data),t.authenticationGeneralCleanup())})},be.prototype.goToMvpdLoginPage=function(){var t,e,n=ut.context.mvpdManager.getCurrentMvpd();n?(t=ut.context.redirectUrl,e=ut.context.authenticationExtraParameters,ut.context.backgroundLoginInProgress=ut.context.clientInfo&&ut.context.clientInfo.isBackgroundLogin(),this.buildAuthenticationUrl(!1,n,e,ut.context.backgroundLoginInProgress&&!n.tempPass).then(function(e){ut.context.backgroundLoginInProgress&&n.tempPass?(h.a.debug("Performing back-channel authentication using TempPass MVPD: ",n),Ve.getInstance().get("",{redirect_url:new Pe(ut.context.spAdobeServicesUrl,null,!0).origin},{url:e,dataType:"text/html"}).then(function(){h.a.debug("Back-channel authentication call with TempPass finished with success"),ut.getInstance().completeBackgroundLogin()},function(){h.a.debug("Back-channel authentication call with TempPass finished with error"),ut.getInstance().completeBackgroundLogin()})):(h.a.debug("Performing authentication using MVPD: ",n),!0===ut.context.backgroundLoginInProgress&&(t=i.p+c.BACKGROUND_LOGIN_COMPLETE_PATH),!1===ut.context.backgroundLoginInProgress&&J.a.setPendingAuthenticationCookieState(!0),n.iFrameRequired?ut.context.callbackManager.callCallback(u.OPEN_IFRAME_STATUS_CALLBACK,e,n.iFrameWidth,n.iFrameHeight,t):ut.context.callbackManager.callCallback(u.NAVIGATE_TO_URL_STATUS_CALLBACK,e,t,ut.context.backgroundLoginInProgress))},function(e){ut.context.callbackManager.onErrorHandler(e.data),ut.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS)})):(this.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS,L.N500),this.authenticationGeneralCleanup())},be.prototype.buildAuthenticationUrl=function(r,i,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),new Promise(function(o,t){Ce.getInstance().obtainRegCode(ut.context.requestorId).then(function(e){var t={reg_code:e.getCode(),mso_id:i.id,requestor_id:ut.context.requestorId,no_iframe:s?"true":"false",domain_name:"adobe.com"};null!=a&&(t.generic_data=a),r&&(t.passive="true",t.redirect_url=ut.context.spAdobeServicesUrl+c.PASSIVE_AUTHENTICATION_REDIRECT_ENDPOINT_PATH),ut.context.clientInfo&&null!==ut.context.clientInfo.isIFrameRequiredForMvpd(i.id)&&(t.iframe_required=ut.context.clientInfo.isIFrameRequiredForMvpd(i.id)),t=P.extend(t,Ke.globalData);var n=ut.context.spAdobeServicesUrl+c.AUTHENTICATION_ENDPOINT_PATH+R.param(t);o(n)},function(e){t({data:e,status:L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})})})},be.prototype.retrieveAuthenticationToken=function(t,n){Ce.getInstance().obtainRegCode(ut.context.requestorId).then(function(e){Ve.getInstance().post(c.AUTHENTICATION_TOKEN_ENDPOINT_PATH,{_method:"GET",reg_code:e.getCode(),requestor_id:ut.context.requestorId},{dataType:"xml"}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)})},function(e){n(e,L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},be.prototype.onAuthenticationTokenSuccessful=function(e){var t,n,o,r;A.checkPendingLogout(e)?(ut.context.storageManager.ditchTokens(),this.onAuthenticationTokenError(e,null,null)):(t=new z(S.getNodeText("authnToken",e)))&&t.isValid()?(h.a.debug("Successfully retrieved authn token!"),ut.context.cachedAuthentication=!1,n=t.getMvpdID(),ut.context.mvpdManager.setCurrentMvpdID(n),(o=ut.context.mvpdManager.getMvpdByID(n))&&!o.tempPass&&ut.context.storageManager.setCanAuthenticate(!0),ut.context.storageManager.setAuthenticationToken(t),r=S.getNodeText("userMeta",e),ut.context.storageManager.setUserMetadata(r),be.CACHE=null,ut.context.userProfileService.completeAuthenticationTokenSuccessful()):this.onAuthenticationTokenError(e,null,null,t)},be.prototype.onAuthenticationTokenError=function(e,t,n,o){var r;void 0===o&&(o=null),t===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(h.a.warn("Authentication token retrieval failed due to missing required prerequisites!"),ut.context.callbackManager.onErrorHandler(e)):(401===t||400===t&&("34763"===L.getReasonFromErrorResponse(n.responseText)||"34764"===L.getReasonFromErrorResponse(n.responseText))?ut.context.callbackManager.onErrorHandler(L.N130):ut.context.callbackManager.onErrorHandler(L.N000),o?!o.isExpired()||(r=ut.context.mvpdManager.getCurrentMvpd())&&r.tempPass&&ut.context.callbackManager.onErrorHandler(L.N111):h.a.error("Error retrieving authentication token: ",e)),ut.context.userProfileService.completeAuthenticationTokenError()},be.prototype.completeAuthenticationTokenSuccessful=function(){ut.context.backgroundLoginInProgress&&this.backgroundLoginSuccessHelper(),nt.configurationInitialized||ut.context.configurationService.onConfigurationInitializedComplete(),this.authenticationGeneralCleanup()},be.prototype.completeAuthenticationTokenError=function(){ut.context.backgroundLoginInProgress&&this.backgroundLoginFailHelper(),nt.configurationInitialized||ut.context.configurationService.onConfigurationInitializedComplete(),this.authenticationGeneralCleanup()},be.prototype.completePassiveAuthentication=function(){var o=this;ut.context.passiveAuthenticationTimer&&(h.a.debug("Completed passive authentication!"),clearTimeout(ut.context.passiveAuthenticationTimer),ut.context.passiveAuthenticationTimer=null,ut.context.userProfileService.retrieveAuthenticationToken(function(e){return o.onAuthenticationTokenSuccessful(e)},function(e,t,n){return o.onAuthenticationTokenError(e,t,n)}))},be.prototype.authenticationGeneralCleanup=function(){ut.context.interactiveAuthenticationInProgress&&(ut.context.interactiveAuthenticationInProgress=!1),ut.context.nonInteractiveAuthenticationInProgress&&(ut.context.nonInteractiveAuthenticationInProgress=!1,ut.context.passiveAuthenticationTimer=null),ut.context.backgroundLoginInProgress&&(ut.context.backgroundLoginInProgress=!1),ut.context.pendingAuthorizationInProgress&&ut.context.decisionService.authorizationGeneralCleanup(),ut.context.storageManager.setRegCode(null)},be.prototype.backgroundLoginSuccessHelper=function(){var e=ut.context.storageManager.getAuthenticationToken(),t=ut.context.mvpdManager.getCurrentMvpd();e&&e.isAuthNAll()&&ut.context.callbackManager.onErrorHandler(L.N010),t&&t.tempPass&&ut.context.callbackManager.onErrorHandler(L.N011),ut.context.pendingAuthorizationInProgress?null!==ut.context.resourceId?(h.a.debug("Pending authorization resource: "+ut.context.resourceId+" and extra parameters: "+ut.context.authorizationExtraParameters),ut.getInstance().getAuthorization(ut.context.resourceId,null,ut.context.authorizationExtraParameters)):ut.context.decisionService.sendAuthorizationFailCallbacks(ut.context.resourceId,l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,"",L.Z100):this.sendAuthenticationSuccessCallbacks()},be.prototype.backgroundLoginFailHelper=function(){ut.context.pendingAuthorizationInProgress?ut.context.decisionService.sendAuthorizationFailCallbacks(ut.context.resourceId,l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,""):this.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_ERROR_STATUS)},be.prototype.sendAuthenticationSuccessCallbacks=function(){h.a.debug("Send authentication success callbacks"),ut.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,1,""),ut.context.callbackManager.sendTrackingData(l.TRACK_AUTHENTICATION_DETECTION,!0)},be.prototype.sendAuthenticationFailCallbacks=function(e,t){void 0===t&&(t=void 0),h.a.debug("Send authentication fail callbacks for: ",e,t),t&&ut.context.callbackManager.onErrorHandler(t),ut.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,e),ut.context.callbackManager.sendTrackingData(l.TRACK_AUTHENTICATION_DETECTION,!1)},be.prototype.getValue=function(o,e){var r=ut.context.callbackManager.callCallback;switch(o){case"TTL_AUTHN":be.getAuthnTTL();break;case"TTL_AUTHZ":be.getAuthzTTL(e);break;case"DEVICEID":this.getDeviceID();break;case"MVPD_SELECTION":be.getMVPDSelection();break;default:try{var t,n,i=Ue.getInstance().getUserMetadata(),a=be.CACHE;if(!o)return void r(u.METADATA_STATUS_CALLBACK,o,null,null);be.isMetadataValid(i)?be.isMetadataValid(a)&&a.updated>=i.updated?(n=(t=a.data[o])?a.encrypted&&-1<P.inArray(o,a.encrypted):null,r(u.METADATA_STATUS_CALLBACK,o,n,t)):this.retrieveEncryptedMetadata(i,function(e){try{e=JSON.parse(e);var t=(be.CACHE=e)&&e.data&&e.data[o]?e.data[o]:null,n=e&&e.encrypted&&-1<P.inArray(o,e.encrypted);r(u.METADATA_STATUS_CALLBACK,o,null!=t?n:null,t)}catch(e){h.a.error(e),r(u.METADATA_STATUS_CALLBACK,o,null,null)}},function(e,t){t===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?ut.context.callbackManager.onErrorHandler(o):r(u.METADATA_STATUS_CALLBACK,o,null,null)}):r(u.METADATA_STATUS_CALLBACK,o,null,null)}catch(e){r(u.METADATA_STATUS_CALLBACK,o,null,null)}}},be.prototype.retrieveDeviceIDHash=function(e,t,n){ut.context.requestorId?Ve.getInstance().post(c.DEVICE_ID_ENDPOINT_PATH,{requestor_id:ut.context.requestorId,device_id:e},{dataType:"text/plain"}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)}):n(null)},be.prototype.retrieveEncryptedMetadata=function(e,t,n){var o=Ue.getInstance().getAuthenticationToken();ut.context.requestorId&&o?Ve.getInstance().post(c.USER_METADATA_ENDPOINT_PATH,{requestor:ut.context.requestorId,authn:o.getSource(),metadata:JSON.stringify(e)},{dataType:"text"}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)}):n(null)},be.getAuthnTTL=function(){var e=null,t=Ue.getInstance().getAuthenticationToken();t&&t.isValid()&&(e=t.getExpiryDate().getTime()),ut.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,"TTL_AUTHN",null,e)},be.getAuthzTTL=function(e){var t,n=null,o=Array.isArray(e)&&0<e.length?e[0]:null;!o||(t=Ue.getInstance().getAuthorizationToken(ut.context.requestorId,o))&&t.isValid()&&(n=t.getExpiryDate().getTime()),ut.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,"TTL_AUTHZ",e,n)},be.prototype.getDeviceID=function(){function t(e,t){t===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS&&ut.context.callbackManager.onErrorHandler(e),o(u.METADATA_STATUS_CALLBACK,"DEVICEID",null,null)}var n=this,o=ut.context.callbackManager.callCallback;me.getInstance().getDeviceId().then(function(e){n.retrieveDeviceIDHash(e,function(e){return t=e,void(A.checkPendingLogout(t)?(ut.context.storageManager.ditchTokens(),o(u.METADATA_STATUS_CALLBACK,"DEVICEID",null,null)):o(u.METADATA_STATUS_CALLBACK,"DEVICEID",null,t));var t},t)},function(e){t(e,L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},be.getMVPDSelection=function(){var e=Ue.getInstance().getMvpdSelection();ut.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,"MVPD_SELECTION",null,e)},be.isMetadataValid=function(e){return e&&e.data&&e.updated},be.CACHE=null,be);function be(){}var De=(ke.LOCAL_STORAGE_PRIMARY_KEY="entitlementToken",ke.SESSION_STORAGE_PRIMARY_KEY="sessionStorage",ke.MEMORY_STORAGE_PRIMARY_KEY="memoryStorage",ke.STORAGE_VERSION_KEY="storageVersion",ke.GENERIC_REQUESTOR="GenericRequestor",ke.DEVICE_IID_KEY="iid",ke.DEVICE_SFP_KEY="sfp",ke.APPLICATION_REGISTRATION="applicationRegistration",ke.ACCESS_TOKEN="accessToken",ke.REG_CODE="regCode",ke);function ke(){}var xe=(Me.LOCAL_STORAGE="local",Me.SESSION_STORAGE="session",Me.MEMORY_STORAGE="memory",Me);function Me(){}var Ue=(Le.getInstance=function(){return this.instance||(this.instance=new Le),this.instance},Le.prototype.getEntitlementToken=function(){return this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken},Le.prototype.syncStorage=function(){var o=this;return new Promise(function(n){o.pm.postStorage("getItems",De.STORAGE_VERSION_KEY,De.DEVICE_IID_KEY,De.GENERIC_REQUESTOR,De.LOCAL_STORAGE_PRIMARY_KEY,De.SESSION_STORAGE_PRIMARY_KEY).then(function(t){if(!o.isDirty&&!P.isEmpty(t)&&!t.error)for(var e in t)if(t[e]!==localStorage.getItem(e)&&(localStorage.setItem(e,t[e]),e===o.storagePrimaryKey))try{o.entitlementToken=JSON.parse(t[e])}catch(e){h.a.error("Error parsing value from SSO storage",e)}o.pm.postStorage("isSessionCookieSet").then(function(e){o.isDirty||P.isEmpty(t)||e.isSessionCookieSet&&J.a.setSessionCookie()}),o.startTimer(),n()})})},Le.prototype.getStorageData=function(){return[this.internalLocalStorage.getItem(De.LOCAL_STORAGE_PRIMARY_KEY),this.internalLocalStorage.getItem(De.SESSION_STORAGE_PRIMARY_KEY)]},Le.prototype.switchToSessionStorage=function(){var e=this;this.isLocalStorageSpaceEnabled()&&(h.a.warn("Switch to using session storage!"),this.storageType=xe.SESSION_STORAGE,this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage,J.a.isSessionCookieSet()||(h.a.warn("New authentication session! Session storage will be reset!"),this.isDirty=!0,J.a.setSessionCookie(),this.pm.postStorage("setSessionCookie").then(function(){e.isDirty=!1}),this.saveEntitlementTokenToStorage(new Z))),this.entitlementToken=this.loadEntitlementTokenFromStorage()},Le.prototype.switchToLocalStorage=function(){this.isLocalStorageSpaceEnabled()&&(h.a.warn("Switch to using local storage!"),this.storageType=xe.LOCAL_STORAGE,this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage),this.entitlementToken=this.loadEntitlementTokenFromStorage()},Le.prototype.setMvpdSelection=function(e){this.isDirty=!0,this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdSelection(e),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY)},Le.prototype.getMvpdSelection=function(){return this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY),this.entitlementToken.getMvpdSelection()},Le.prototype.setApplicationRegistration=function(e){this.saveDataToStorage(e,De.APPLICATION_REGISTRATION)},Le.prototype.getApplicationRegistration=function(){return this.loadDataFromStorage(De.APPLICATION_REGISTRATION)},Le.prototype.setAccessToken=function(e){this.saveDataToStorage(e,De.ACCESS_TOKEN)},Le.prototype.getAccessToken=function(){return this.loadDataFromStorage(De.ACCESS_TOKEN)},Le.prototype.setRegCode=function(e){this.saveDataToStorage(e,De.REG_CODE)},Le.prototype.getRegCode=function(){return this.loadDataFromStorage(De.REG_CODE)},Le.prototype.setAuthenticationToken=function(e){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var t=this.entitlementToken.getAuthenticationTokens(),n=0;n<t.length;)new z(t[n]).getRequestorID()===e.getRequestorID()?t.splice(n,1):n++;t.push(e.getSource()),this.saveEntitlementTokenToStorage(this.entitlementToken)},Le.prototype.getAuthenticationToken=function(){var e,t=this.getMvpdID(),n=null;return!t||(e=W.getInstance().getMvpdByID(t))&&(n=e.authPerAggregator?this.searchForAuthenticationTokenForRequestor(ut.context.requestorId):this.searchForFirstValidAuthenticationToken()),n},Le.prototype.searchForFirstValidAuthenticationTokenForCurrentMvpd=function(){var e=this.getMvpdID(),t=null;if(e){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var n=void 0,o=0,r=this.entitlementToken.getAuthenticationTokens();o<r.length;o++){var i=r[o];if((n=new z(i)).getMvpdID()===e&&n.isValid()){t=n;break}}}return t},Le.prototype.setAuthorizationToken=function(e){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var t,n=this.entitlementToken.getAuthorizationTokens(),o=0;o<n.length;)(t=new z(n[o])).getRequestorID()===e.getResourceID()&&t.getResourceID()===e.getResourceID()?n.splice(o,1):o++;n.push(e.getSource()),this.saveEntitlementTokenToStorage(this.entitlementToken)},Le.prototype.getAuthorizationToken=function(e,t){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var n=null,o=0,r=this.entitlementToken.getAuthorizationTokens();o<r.length;o++){var i,a=r[o];if((i=new z(a)).getRequestorID()===e&&i.getResourceID()===t){n=i;break}}return n},Le.prototype.setUserMetadata=function(e){if(this.isDirty=!0,P.isEmpty(e))h.a.warn("Received empty userMetadata");else if(ut.context.requestorId){var t,n,o,r=this.getMvpdID();this.entitlementToken=this.loadEntitlementTokenFromStorage();try{this.entitlementToken.getUserMetadata()||this.entitlementToken.setUserMetadata({}),r?(t=W.getInstance().getMvpdByID(r))?(n=JSON.parse(e),o=t.authPerAggregator?ut.context.requestorId:De.GENERIC_REQUESTOR,this.entitlementToken.getUserMetadata()[o]=n,this.saveEntitlementTokenToStorage(this.entitlementToken)):h.a.warn("Cannot set user metadata token: invalid MVPD selected."):h.a.warn("Cannot set user metadata token: no MVPD selected.")}catch(e){h.a.error(e)}}else h.a.warn("Cannot set user metadata: requestor is not configured.")},Le.prototype.mergeUserMetadata=function(t){var e=this.getUserMetadata();try{var n=JSON.parse(t),o=parseInt(n.updated,10);if(parseInt(e.updated,10)<o&&n.data)try{e.updated=o;var r=n.data;for(var i in r)r.hasOwnProperty(i)&&(e.data[i]=r[i]);this.setUserMetadata(JSON.stringify(e))}catch(e){h.a.warn("Error merging user metadata tokens."),this.setUserMetadata(t)}else h.a.warn("The metadata token received from the server has invalid properties.")}catch(e){h.a.warn("The metadata token received from the server cannot be parsed.")}},Le.prototype.getUserMetadata=function(){var e,t,n=this.getMvpdID(),o=null;return!n||(e=W.getInstance().getMvpdByID(n))&&(this.entitlementToken=this.loadEntitlementTokenFromStorage(),(t=this.entitlementToken.getUserMetadata())&&(o=e.authPerAggregator?t[ut.context.requestorId]:t[De.GENERIC_REQUESTOR])),o},Le.prototype.setMvpdID=function(e){this.isDirty=!0,this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdID(null===e?null:String(e)),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY)},Le.prototype.getMvpdID=function(){return this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY),this.entitlementToken.getMvpdID()},Le.prototype.setCanAuthenticate=function(e){this.isDirty=!0,this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setCanAuthenticate(Boolean(e)),this.saveEntitlementTokenToStorage(this.entitlementToken),this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY)},Le.prototype.getCanAuthenticate=function(){return this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY),this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.storageType===xe.SESSION_STORAGE&&(this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY),Boolean(this.entitlementToken.getCanAuthenticate())},Le.prototype.setPreauthorizationCache=function(e){this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setPreauthorizationCache(e.concat()),this.saveEntitlementTokenToStorage(this.entitlementToken)},Le.prototype.getPreauthorizationCache=function(){return this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.getPreauthorizationCache()},Le.prototype.setDeviceId=function(e){var t=this;this.isDirty=!0,this.storage.setItem(De.DEVICE_IID_KEY,e),this.storageType!==xe.MEMORY_STORAGE&&this.pm.postStorage("setItem",De.DEVICE_IID_KEY,e).then(function(){return t.isDirty=!1})},Le.prototype.setSFP=function(e){var t=this;this.isDirty=!0,this.storage.setItem(De.DEVICE_SFP_KEY,e),this.storageType!==xe.MEMORY_STORAGE&&this.pm.postStorage("setItem",De.DEVICE_SFP_KEY,e).then(function(){return t.isDirty=!1})},Le.prototype.getDeviceId=function(){return this.storage.getItem(De.DEVICE_IID_KEY)},Le.prototype.getSFP=function(){return this.storage.getItem(De.DEVICE_SFP_KEY)},Le.prototype.clearDeviceId=function(){this.storage.removeItem(De.DEVICE_IID_KEY)},Le.prototype.getSAMLNameID=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();var e=this.searchForFirstValidAuthenticationToken();return e?e.getProperty("simpleSamlNameID"):null},Le.prototype.getSAMLSessionIndex=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();var e=this.searchForFirstValidAuthenticationToken();return e?e.getProperty("simpleSamlSessionIndex"):null},Le.prototype.clearStorage=function(e){void 0===e&&(e=!0),this.isDirty=!0,this.entitlementToken=this.loadEntitlementTokenFromStorage(),this.entitlementToken.setMvpdID(null),this.entitlementToken.setCanAuthenticate(!1),e&&(h.a.warn("Storage content was reset!"),this.entitlementToken.setAuthenticationTokens([]),this.entitlementToken.setUserMetadata({})),this.entitlementToken.setAuthorizationTokens([]),this.saveEntitlementTokenToStorage(this.entitlementToken)},Le.prototype.resetStorage=function(){this.isDirty=!0,h.a.warn("Storage content was reset!"),this.saveDataToStorage(null,De.APPLICATION_REGISTRATION),this.saveDataToStorage(null,De.ACCESS_TOKEN),this.saveDataToStorage(null,De.REG_CODE),this.entitlementToken=new Z,this.saveEntitlementTokenToStorage(this.entitlementToken)},Le.prototype.ditchTokens=function(){this.switchToSessionStorage(),this.resetStorage(),this.switchToLocalStorage(),this.resetStorage(),Ne.CACHE=null},Le.prototype.searchForAuthenticationTokenForRequestor=function(e){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var t=null,n=0,o=this.entitlementToken.getAuthenticationTokens();n<o.length;n++){var r,i=o[n];if((r=new z(i)).getRequestorID()===e){t=r;break}}return t},Le.prototype.searchForFirstValidAuthenticationToken=function(){this.entitlementToken=this.loadEntitlementTokenFromStorage();for(var e=null,t=0,n=this.entitlementToken.getAuthenticationTokens();t<n.length;t++){var o,r=n[t];if((o=new z(r)).isValid()){e=o;break}}return e},Le.prototype.loadEntitlementTokenFromStorage=function(){var e=null,t=new Z;try{var n=this.storage.getItem(this.storagePrimaryKey);n&&(e=JSON.parse(n))}catch(e){h.a.error(e),h.a.warn("Storage content was invalid when trying to convert from String to JSON Object!")}return e?P.isEmpty(e)?(h.a.warn("Storage content was an empty JSON Object!"),this.resetStorage(),new Z):(t.loadEntitlementTokenFromJSONObject(e),t.isEntitlementTokenContentValid()?t:(h.a.warn("Storage content was invalid when trying to validate entitlement token content!"),this.resetStorage(),new Z)):(h.a.warn("Storage content was missing, null or couldn't be parsed!"),this.resetStorage(),new Z)},Le.prototype.saveEntitlementTokenToStorage=function(t){var n=this;try{this.storageType===xe.MEMORY_STORAGE&&this.isLocalStorageSpaceEnabled()&&(this.storagePrimaryKeyBeforeSwitchingToMemoryStorage===De.LOCAL_STORAGE_PRIMARY_KEY?(h.a.warn("Switch to local storage from memory storage!"),this.storageType=xe.LOCAL_STORAGE,this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY):(h.a.warn("Switch to session storage from memory storage!"),this.storageType=xe.SESSION_STORAGE,this.storagePrimaryKey=De.SESSION_STORAGE_PRIMARY_KEY),this.storage=this.internalLocalStorage),this.storage.setItem(this.storagePrimaryKey,JSON.stringify(t)),this.storageType!==xe.MEMORY_STORAGE&&this.pm.postStorage("setItem",this.storagePrimaryKey,JSON.stringify(t)).then(function(){var e=n.getDeviceId();P.isEmpty(e)||n.pm.postStorage("setItem",De.DEVICE_IID_KEY,e),n.isDirty=!1})}catch(e){h.a.error(e),t=this.sanitizeEntitlementToken(t);try{this.storage.setItem(this.storagePrimaryKey,JSON.stringify(t)),this.pm.postStorage("setItem",this.storagePrimaryKey,JSON.stringify(t)).then(function(){var e=n.getDeviceId();P.isEmpty(e)||n.pm.postStorage("setItem",De.DEVICE_IID_KEY,e),n.isDirty=!1})}catch(e){h.a.error(e),h.a.warn("Web browser localStorage space is still exceeded, switch to using memory storage!"),this.storagePrimaryKeyBeforeSwitchingToMemoryStorage=this.storagePrimaryKey,this.storageType=xe.MEMORY_STORAGE,this.storagePrimaryKey=De.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage,this.storage.setItem(this.storagePrimaryKey,JSON.stringify(t))}}},Le.prototype.loadDataFromStorage=function(t){var e=null,n=Te.createEmptyDataObject(t);try{var o=this.storage.getItem(t);o&&(e=JSON.parse(o))}catch(e){return h.a.warn("Storage data was invalid when trying to convert from String to JSON Object!",t),null}return e?(n.copyFromJSONObject(e),n.isValid()?n:(h.a.warn("Storage data was invalid when trying to validate content!",t),null)):(h.a.warn("Storage data was missing, null or couldn't be parsed!",t),null)},Le.prototype.saveDataToStorage=function(t,n){try{this.storage.setItem(n,JSON.stringify(t))}catch(e){h.a.error(e),h.a.warn("Web browser localStorage space is exceeded, switch to using memory storage!"),this.storagePrimaryKeyBeforeSwitchingToMemoryStorage=this.storagePrimaryKey,this.storageType=xe.MEMORY_STORAGE,this.storagePrimaryKey=De.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage,this.storage.setItem(n,JSON.stringify(t))}},Le.prototype.isLocalStorageSpaceEnabled=function(){try{return this.internalLocalStorage=localStorage,!0}catch(e){return Le.error=L.LS011,!1}},Le.prototype.isLocalStorageSpaceAvailable=function(){try{return this.internalLocalStorage.setItem("canWrite","test"),this.internalLocalStorage.removeItem("canWrite"),this.internalLocalStorage.setItem("canWrite","yes"),"yes"===this.internalLocalStorage.getItem("canWrite")||(Le.error=L.LS011,!1)}catch(e){return Le.error=L.LS011,!1}},Le.prototype.startTimer=function(){var e=this;setTimeout(function(){return e.syncStorage()},1e3)},Le.prototype.sanitizeEntitlementToken=function(e){for(var t=e.getAuthenticationTokens(),n=0;n<t.length;)new z(t[n]).isValid()?n++:t.splice(n,1);for(var o=e.getAuthorizationTokens(),n=0;n<o.length;)new z(o[n]).isValid()?n++:o.splice(n,1);return e},Le);function Le(){this.internalMemoryStorage=new F,this.pm=new ee.a(Ke.globalOptions.proxyURL,window.accessEnablerProxy.contentWindow),this.isLocalStorageSpaceEnabled()&&this.isLocalStorageSpaceAvailable()?(this.storageType=xe.LOCAL_STORAGE,this.storagePrimaryKey=De.LOCAL_STORAGE_PRIMARY_KEY,this.storage=this.internalLocalStorage):(h.a.warn("Web localStorage is not enabled or not available, switch to using memory storage!"),this.storageType=xe.MEMORY_STORAGE,this.storagePrimaryKey=De.MEMORY_STORAGE_PRIMARY_KEY,this.storage=this.internalMemoryStorage),this.storage.setItem(De.STORAGE_VERSION_KEY,2),this.storageType!==xe.MEMORY_STORAGE&&this.pm.postStorage("setItem",De.STORAGE_VERSION_KEY,2)}var we=i(2),He=(Ge.getInstance=function(){return this.instance||(this.instance=new Ge),this.instance},Ge.prototype.obtainAccessToken=function(){var o=this;return new Promise(function(t,n){var e=o.storageManager.getAccessToken();null!=e?t(e):o.obtainApplicationRegistration().then(function(e){o.retrieveAccessToken(e).then(function(e){t(e)},function(e){n(e)})},function(e){n(e)})})},Ge.prototype.obtainApplicationRegistration=function(){var o=this;return new Promise(function(t,n){var e=o.storageManager.getApplicationRegistration();null!=e?t(e):o.retrieveApplicationRegistration().then(function(e){t(e)},function(e){n(e)})})},Ge.prototype.retrieveAccessToken=function(e){var o=this;return new Promise(function(n,t){o.httpService.post(c.ACCESS_TOKEN_ENDPOINT_PATH,{grant_type:te.CLIENT_CREDENTIALS,client_id:e.getClientId(),client_secret:e.getClientSecret()},{url:new we(ut.context.spAdobeServicesUrl,null,!0).origin,dataType:"application/x-www-form-urlencoded"}).then(function(e){var t=new ue(e.data);o.storageManager.setAccessToken(t),n(t)},function(e){400!==e.status&&401!==e.status&&Ge.RETRY_RETRIEVING_ACCESS_TOKEN?(Ge.RETRY_RETRIEVING_ACCESS_TOKEN=!1,o.retrieveApplicationRegistration().then(function(e){o.retrieveAccessToken(e).then(function(e){n(e)},function(e){t(e)})},function(e){t(e)})):t(L.R401)})})},Ge.prototype.retrieveApplicationRegistration=function(){var o=this;return new Promise(function(n,t){o.httpService.post(c.CLIENT_REGISTRATION_ENDPOINT_PATH,{software_statement:ut.getInstance().softwareStatement},{url:new we(ut.context.spAdobeServicesUrl,null,!0).origin,dataType:"json"}).then(function(e){var t=new ie(e.data);o.storageManager.setApplicationRegistration(t),n(t)},function(e){400!==e.status&&401!==e.status&&Ge.RETRY_RETRIEVING_APPLICATION_REGISTRATION?(Ge.RETRY_RETRIEVING_APPLICATION_REGISTRATION=!1,o.retrieveApplicationRegistration().then(function(e){n(e)},function(e){t(e)})):t(L.R400)})})},Ge.RETRY_RETRIEVING_ACCESS_TOKEN=!0,Ge.RETRY_RETRIEVING_APPLICATION_REGISTRATION=!0,Ge);function Ge(){this.httpService=Ve.getInstance(),this.storageManager=Ue.getInstance()}var ze=i(2),Ke=(Fe.prototype.send=function(){h.a.debug("Sending XHR request: ",this.options),this.xhr.send(this.options.body)},Fe.prototype.setOptions=function(e){this.options=P.extend(Object.create(Fe.globalOptions),this.defaultOptions,e),e.data&&(this.options.data=P.extend({},this.defaultOptions.data,e.data)),e.headers&&(this.options.headers=P.extend({},this.defaultOptions.headers,e.headers)),this.urlObject=new ze(this.options.url,null,!1)},Fe.prototype.setCookies=function(){for(var e in this.options.cookies)this.options.cookies.hasOwnProperty(e)&&(P.isEmpty(this.options.cookies[e])?document.cookie=e+"= ;Secure ;SameSite=None ;path=/ ;expires=Thu, 01 Jan 1970 00:00:00 UTC;":document.cookie=e+"="+this.options.cookies[e]+" ;Secure ;SameSite=None ;path=/")},Fe.prototype.setCache=function(){var e;this.options.cache||(e="_="+(new Date).getTime(),this.urlObject.query&&1<this.urlObject.query.length?this.urlObject.query+="&"+e:this.urlObject.query=e)},Fe.prototype.setData=function(){var e;P.isEmpty(this.options.data)||(e=R.param(this.options.data,this.options.traditional),"POST"===this.options.type?"json"===this.options.dataType?this.options.body=JSON.stringify(this.options.data):this.options.body=e:(this.urlObject.query&&1<this.urlObject.query.length?this.urlObject.query+="&"+e:this.urlObject.query=e,this.options.body=null,this.options.url=this.urlObject.toString()))},Fe.prototype.setXHR=function(){var a=this;this.xhr=new XMLHttpRequest,this.xhr.withCredentials=!0,this.xhr.open(this.options.type,this.options.url,this.options.async),this.options.async&&(this.xhr.timeout=this.options.timeout),this.xhr.onreadystatechange=function(e){var n,t=e.target;if(a.options.data&&a.options.data.resource_id&&(t.resourceId=a.options.data.resource_id),4===t.readyState){t.getAllResponseHeaders&&(n={},t.getAllResponseHeaders().split("\r\n").map(function(e){var t=e.split(": ");2===t.length&&(n[t[0].toLowerCase()]=t[1])}),t.responseHeaders=n),h.a.debug("Receiving XHR response: ",t);var o=200<=t.status&&t.status<400,r=o?a.options.success:a.options.error,i="xml"===a.options.dataType?t.responseXML:t.responseText;if(!o&&a.retry){if(401===t.status)return void a.retryAjaxDueToInvalidAuthorization();if(400===t.status&&("34763"===L.getReasonFromErrorResponse(t.responseText)||"34764"===L.getReasonFromErrorResponse(t.responseText)))return void a.retryAjaxDueToInvalidIndividualization()}r.apply(a.options.context,[i,e.target.status,t])}}},Fe.prototype.setHeaders=function(){if("POST"===this.options.type&&("json"===this.options.dataType?this.xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"):this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),this.options.headers)for(var e in this.options.headers)this.options.headers.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.headers[e]);this.options.dataType&&this.mimeTypes[this.options.dataType]&&this.xhr.setRequestHeader("Accept",this.mimeTypes[this.options.dataType])},Fe.prototype.retryAjaxDueToInvalidAuthorization=function(){var t=this;h.a.warn("Ajax call failed due to invalid authorization. Will invalidate application registration and access token!"),Ue.getInstance().setApplicationRegistration(null),Ue.getInstance().setAccessToken(null),He.getInstance().obtainAccessToken().then(function(e){h.a.warn("Will retry the Ajax call with new access token!"),t.options.headers.Authorization="Bearer "+e.getAccessToken(),new Fe(t.options,!1).send()},function(e){t.options.error(e,L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},Fe.prototype.retryAjaxDueToInvalidIndividualization=function(){var t=this;h.a.warn("Ajax call failed due to invalid device individualization. Will invalidate device individualization!"),Ue.getInstance().clearDeviceId(),me.getInstance().getDeviceId().then(function(e){h.a.warn("Will retry the Ajax call with new device individualization!"),t.options.headers.ap_21=e,new Fe(t.options,!1).send()},function(e){t.options.error(e,L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)})},Fe.globalOptions={proxyURL:"AccessEnablerProxy.html"},Fe.globalHeaders={},Fe.globalCookies={client_type:"html5",client_version:"4.3.1"},Fe.globalData={},Fe);function Fe(e,t){void 0===t&&(t=!0),this.defaultOptions={url:window.location.href,async:!0,cache:!1,type:"GET",context:this,dataType:"xml",timeout:3e4,body:{},data:Fe.globalData,headers:Fe.globalHeaders,cookies:Fe.globalCookies,traditional:!1},this.mimeTypes={xml:"application/xml",json:"application/json",text:"*/*"},this.retry=t,this.setOptions(e),this.setCookies(),this.setCache(),this.setData(),this.setXHR(),this.setHeaders()}var Ve=(Be.getInstance=function(){return this.instance||(this.instance=new Be),this.instance},Be.getRequiredHeaders=function(u){return new Promise(function(t,n){var o=JSON.parse(JSON.stringify(me.getInstance().getDeviceInfo())),e=Ue.getInstance().getSAMLNameID();e&&(o.ap_19=e);var r=Ue.getInstance().getSAMLSessionIndex();function i(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];if(-1!==u.indexOf(o))return!0}return!1}r&&(o.ap_23=r);var a=i(Be.ENDPOINTS_REQUIRING_DEVICE_ID_HEADER),s=i(Be.ENDPOINTS_REQUIRING_ACCESS_TOKEN_HEADER),c=function(){He.getInstance().obtainAccessToken().then(function(e){o.Authorization="Bearer "+e.getAccessToken(),t(o)},function(e){n({data:e,status:L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})})};a?me.getInstance().getDeviceId().then(function(e){o.ap_21=e,o.pass_sfp=Ue.getInstance().getSFP(),s?c():t(o)},function(e){n({data:e,status:L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS})}):s?c():t(o)})},Be.prototype.ajax=function(t,n,i){var a,s=this;return void 0===i&&(i={}),new Promise(function(o,r){Be.getRequiredHeaders(t).then(function(e){a=new s.ajaxReference({type:i.method||"GET",url:i.url?""+i.url+t:""+ut.context.spAdobeServicesUrl+t,data:n,dataType:i.dataType||"json",success:function(e,t,n){o({data:e,status:t,xhr:n})},error:function(e,t,n){r({data:e,status:t,xhr:n})},headers:e,context:i.context||s,traditional:i.traditional||!1});try{a.send()}catch(e){r(e)}},function(e){r(e)})})},Be.prototype.post=function(e,t,n){return void 0===n&&(n={}),n.method="POST",this.ajax(e,t,n)},Be.prototype.get=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),n.method="GET",this.ajax(e,t,n)},Be.prototype.delete=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),n.method="DELETE",this.ajax(e,t,n)},Be.prototype.put=function(e,t,n){return void 0===n&&(n={}),n.method="PUT",this.ajax(e,t,n)},Be.ENDPOINTS_REQUIRING_DEVICE_ID_HEADER=[c.AUTHENTICATION_TOKEN_ENDPOINT_PATH,c.AUTHORIZATION_TOKEN_ENDPOINT_PATH,c.MEDIA_TOKEN_ENDPOINT_PATH],Be.ENDPOINTS_REQUIRING_ACCESS_TOKEN_HEADER=[c.INDIVIDUALIZATION_ENDPOINT_PATH,c.CONFIG_ENDPOINT_PATH,c.AUTHENTICATION_ENDPOINT_PATH,c.AUTHENTICATION_TOKEN_ENDPOINT_PATH,c.AUTHORIZATION_TOKEN_ENDPOINT_PATH,c.MEDIA_TOKEN_ENDPOINT_PATH,c.PREAUTHORIZATION_ENDPOINT_PATH,c.LOGOUT_ENDPOINT_PATH,c.DEVICE_ID_ENDPOINT_PATH,c.USER_METADATA_ENDPOINT_PATH,c.REG_CODE_ENDPOINT_PATH],Be);function Be(){this.ajaxReference=Ke}var qe=(Ye.prototype.startAuthorization=function(e,t){var o=this;h.a.debug("Authorization in progress for",e,t);var n=ut.context.storageManager.getAuthorizationToken(ut.context.requestorId,e);n&&n.isValid()?(h.a.debug("Authorization token found and valid!"),ut.context.cachedAuthorization=!0,this.retrieveMediaToken(n,JSON.stringify({}),function(e,t,n){return o.onRetrieveMediaTokenSuccessful(e,t,n)},function(e,t,n){return o.onRetrieveMediaTokenError(e,t,n)})):(h.a.debug("Authorization token not found or invalid!"),ut.context.cachedAuthorization=!1,this.retrieveAuthorizationToken(Array.isArray(e)?e[0]:e,t,function(e,t,n){return o.onRetrieveAuthorizationTokenSuccessful(e,t,n)},function(e,t,n){return o.onRetrieveAuthorizationTokenError(e,t,n)}))},Ye.prototype.retrieveAuthorizationToken=function(e,t,n,o){Ve.getInstance().post(c.AUTHORIZATION_TOKEN_ENDPOINT_PATH,{resource_id:e,requestor_id:ut.context.requestorId,authentication_token:Ue.getInstance().getAuthenticationToken().getSource(),mso_id:W.getInstance().getCurrentMvpdID(),generic_data:t,userMeta:1},{dataType:"text"}).then(function(e){return n(e.data,e.status,e.xhr)},function(e){return o(e.data,e.status,e.xhr)})},Ye.prototype.onRetrieveAuthorizationTokenSuccessful=function(t,n,o){var r=this;if(A.checkPendingLogout(t))return ut.context.storageManager.ditchTokens(),"34764"===A.getPendingLogoutReason(t)&&(h.a.warn("Device id mismatch!"),ut.context.callbackManager.onErrorHandler(L.SEC412),ut.context.storageManager.clearDeviceId()),void("getAuthorization"===ut.context.methodInvokingAuthorization?ut.getInstance().getAuthorization(ut.context.resourceId):ut.getInstance().checkAuthorization(ut.context.resourceId));try{t=f.parseXML(t)}catch(e){return h.a.warn("Authorization failed"),void this.onRetrieveAuthorizationTokenError(t,n,o)}var e=S.getNodeText("authzToken",t);if(!e)return h.a.warn("Authorization failed"),void this.onRetrieveAuthorizationTokenError(t,n,o);var i,a=new z(e);a&&a.isValid()?(h.a.debug("Successfully retrieved authorization token!"),ut.context.storageManager.setAuthorizationToken(a),(i=S.getNodeText("userMeta",t))&&(h.a.debug("Merging user metadata tokens."),ut.context.storageManager.mergeUserMetadata(i),Ne.CACHE=null),this.retrieveMediaToken(a,JSON.stringify({}),function(e,t,n){return r.onRetrieveMediaTokenSuccessful(e,t,n)},function(e,t,n){return r.onRetrieveMediaTokenError(e,t,n)})):this.onRetrieveAuthorizationTokenError(t,n,o)},Ye.prototype.onRetrieveAuthorizationTokenError=function(e,t,n){var o;t===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(h.a.warn("Authorization token retrieval failed due to missing required prerequisites!"),this.sendAuthorizationFailCallbacks(n.resourceId,l.TRACK_AUTHORIZATION_DETECTION,"",e)):(400!==t||"34763"!==L.getReasonFromErrorResponse(n.responseText)&&"34764"!==L.getReasonFromErrorResponse(n.responseText)||ut.context.callbackManager.onErrorHandler(L.N130),o=Ye.parseErrorResponse(n),this.sendAuthorizationFailCallbacks(n.resourceId,o.code,o.message,L.fromAuthzErrorResponse(n,n.resourceId))),this.authorizationGeneralCleanup()},Ye.prototype.retrieveMediaToken=function(e,t,n,o){Ve.getInstance().post(c.MEDIA_TOKEN_ENDPOINT_PATH,{authz_token:e.getSource(),requestor_id:ut.context.requestorId,generic_data:t,session_guid:Ue.getInstance().getAuthenticationToken().getProperty("simpleTokenAuthenticationGuid"),hashed_guid:"false"},{dataType:"text"}).then(function(e){return n(e.data,e.status,e.xhr)},function(e){return o(e.data,e.status,e.xhr)})},Ye.prototype.onRetrieveMediaTokenSuccessful=function(e,t,n){var o=new z(e).getResourceID();if(A.checkPendingLogout(e))return ut.context.storageManager.ditchTokens(),"58772"===A.getPendingLogoutReason(e)&&(h.a.warn("Device id mismatch!"),ut.context.callbackManager.onErrorHandler(L.SEC412),ut.context.storageManager.clearDeviceId()),void("getAuthorization"===ut.context.methodInvokingAuthorization?ut.getInstance().getAuthorization(o):ut.getInstance().checkAuthorization(o));h.a.debug("Successfully retrieved media token!");var r=ut.context.storageManager.getAuthorizationToken(ut.context.requestorId,o);r&&r.isAuthZAll()&&ut.context.callbackManager.onErrorHandler(L.Z010(o));var i=ut.context.mvpdManager.getCurrentMvpd();i&&i.tempPass&&ut.context.callbackManager.onErrorHandler(L.Z011(o)),this.sendAuthorizationSuccessCallbacks(o,e),this.authorizationGeneralCleanup()},Ye.prototype.onRetrieveMediaTokenError=function(e,t,n){var o;t===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(h.a.warn("Media token retrieval failed due to missing required prerequisites!"),this.sendAuthorizationFailCallbacks(ut.context.resourceId,l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,"",e)):(400!==t||"34763"!==L.getReasonFromErrorResponse(n.responseText)&&"34764"!==L.getReasonFromErrorResponse(n.responseText)||ut.context.callbackManager.onErrorHandler(L.N130),o=Ye.parseErrorResponse(n),this.sendAuthorizationFailCallbacks(ut.context.resourceId,o.code,o.message)),this.authorizationGeneralCleanup()},Ye.parseErrorResponse=function(e){var t,n="code"in e&&"message"in e?(h.a.warn("Received a non xhr object!"),e):400===e.status?(Ue.getInstance().clearStorage(),{code:l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,message:e.statusText}):e.responseText?((t=e.responseText.split("details")[1])&&2<t.length&&(t=t.substring(1,t.length-2)),{code:l.USER_NOT_AUTHORIZED_ERROR_STATUS,message:t}):{code:l.USER_NOT_AUTHORIZED_GENERIC_ERROR_STATUS,message:""};return n},Ye.prototype.authorizationGeneralCleanup=function(){ut.context.pendingAuthorizationInProgress=!1,ut.context.methodInvokingAuthorization=null,ut.context.authorizationExtraParameters=null,ut.context.resourceId=null},Ye.prototype.sendAuthorizationSuccessCallbacks=function(e,t){h.a.debug("Send authorization success callbacks for: ",e,t),ut.context.callbackManager.callCallback(u.AUTHORIZATION_SUCCESS_STATUS_CALLBACK,e,t),ut.context.callbackManager.sendTrackingData(l.TRACK_AUTHORIZATION_DETECTION,!0)},Ye.prototype.sendAuthorizationFailCallbacks=function(e,t,n,o){void 0===o&&(o=void 0),h.a.debug("Send authorization fail callbacks for: ",e,t,n,o),o&&ut.context.callbackManager.onErrorHandler(o),ut.context.callbackManager.callCallback(u.AUTHORIZATION_FAIL_STATUS_CALLBACK,e,t,n),ut.context.callbackManager.sendTrackingData(l.TRACK_AUTHORIZATION_DETECTION,!1,t,n)},Ye.prototype.retrievePreauthorizationDecisions=function(e,t,n){var o=ut.context.storageManager.getAuthenticationToken();o&&o.isValid()&&ut.context.spAdobeServicesUrl&&Ve.getInstance().post(c.PREAUTHORIZATION_ENDPOINT_PATH,{authentication_token:o.getSource(),requestor_id:ut.context.requestorId,resource_id:e},{dataType:"xml",traditional:!0}).then(function(e){return t(e.data,e.status)},function(e){return n(e.data,e.status)})},Ye.prototype.intersectPreflight=function(e,t){var n=[];if(e&&t)for(var o=0,r=e;o<r.length;o++){var i=r[o];0<=t.indexOf(i.toUpperCase())&&n.push(i)}return n},Ye.prototype.getAuthorizedResourcesFromPreauthorizationCache=function(){for(var e=ut.context.storageManager.getPreauthorizationCache(),t=[],n=0,o=e.length;n<o;n++)!0===e[n].authorized&&t.push(e[n].id);return t},Ye.prototype.requestedResourcesEqualsPreauthorizationCache=function(e){var t=ut.context.storageManager.getPreauthorizationCache();if(t.length!==e.length)return!1;for(var n=0,o=e;n<o.length;n++){var r=o[n];if(-1===P.inArray(r,t))return!1}return!0},Ye);function Ye(){}var je=(Ze.prototype.logout=function(e){var t,n,o,r=ut.context.clientInfo&&ut.context.clientInfo.isBackgroundLogout();e&&ut.context.spAdobeServicesUrl?(t={mso_id:e.getMvpdID(),requestor_id:ut.context.requestorId,name_id:e.getProperty("simpleSamlNameID"),session_index:e.getProperty("simpleSamlSessionIndex"),pi:e.getProperty("simpleSamlNameID")},(n=e.getProperty("simpleTransientPartOfGuid"))&&(t.p1=n),t=P.extend(t,Ke.globalData),o=ut.context.spAdobeServicesUrl+c.LOGOUT_ENDPOINT_PATH,r?(h.a.debug("[LOGOUT] Performing background logout."),t.redirect_url=i.p+c.BACKGROUND_LOGOUT_COMPLETE_PATH,ut.context.backgroundLogoutInProgress=!0,ut.context.callbackManager.callCallback(u.DO_BACKGROUND_LOGOUT_STATUS_CALLBACK,o+R.param(t)),setTimeout(function(){ut.context.backgroundLogoutInProgress&&(h.a.debug("[LOGOUT] Background logout timeout exceeded."),ut.getInstance().completeBackgroundLogout())},3e4)):ut.context.callbackManager.callCallback(u.NAVIGATE_TO_URL_STATUS_CALLBACK,o+R.param(t),null,null)):r?ut.getInstance().completeBackgroundLogout():ut.context.callbackManager.callCallback(u.RELOAD_STATUS_CALLBACK)},Ze);function Ze(){}function Qe(e,t,n){return e._api_methods||(e._api_methods={}),e._api_methods[t]=t,n}var Je=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(a=(i<3?r(a):3<i?r(t,n,a):r(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a},We=i(6),Xe=($e.getInstance=function(){return this.instance||(this.instance=new $e),this.instance},$e.prototype.bind=function(e,t){$e.validate(e),$e.validate(t),this.callbackMap[e]&&Array.isArray(this.callbackMap[e])||(this.callbackMap[e]=[]),this.callbackMap[e].push(t)},$e.prototype.unbind=function(e,t){var n;$e.validate(e),t&&$e.validate(t),this.callbackMap[e]&&Array.isArray(this.callbackMap[e])&&(t?-1<(n=this.callbackMap[e].indexOf(t))&&this.callbackMap[e].splice(n,1):delete this.callbackMap[e])},$e.prototype.executeCallbacks=function(e,t){if(this.callbackMap[e]&&Array.isArray(this.callbackMap[e]))for(var n=0,o=this.callbackMap[e];n<o.length;n++){var r=o[n],i=t?[r].concat(t):[r];this.callCallback.apply(ut.getInstance(),i)}},$e.prototype.onErrorHandler=function(e){this.executeCallbacks(u.SEND_ADVANCED_STATUS_CALLBACK,e)},$e.prototype.sendTrackingData=function(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===o&&(o=null);var r=null,i=ut.context.mvpdManager.getCurrentMvpdID(),a=null,s=ut.context.storageManager.getAuthenticationToken();switch(s&&s.getSubMVPDID()&&(a=i,i=s.getSubMVPDID()),e){case l.TRACK_MVPD_SELECTION:r=[ut.context.mvpdManager.getCurrentMvpdID(),ut.context.deviceInfo.deviceType,ut.context.deviceInfo.clientType,ut.context.deviceInfo.os];break;case l.TRACK_AUTHENTICATION_DETECTION:t?(r=[!0,i,We(s.getProperty("simpleTokenAuthenticationGuid")),ut.context.cachedAuthentication,ut.context.deviceInfo.deviceType,ut.context.deviceInfo.clientType,ut.context.deviceInfo.os,a],ut.context.cachedAuthentication=!0):r=[!1,null,null,null,ut.context.deviceInfo.deviceType,ut.context.deviceInfo.clientType,ut.context.deviceInfo.os,null];break;case l.TRACK_AUTHORIZATION_DETECTION:r=t?[!0,i,We(s.getProperty("simpleTokenAuthenticationGuid")),ut.context.cachedAuthorization,n,o,ut.context.deviceInfo.deviceType,ut.context.deviceInfo.clientType,ut.context.deviceInfo.os,a]:[!1,i,s?We(s.getProperty("simpleTokenAuthenticationGuid")):null,ut.context.cachedAuthorization,n,o,ut.context.deviceInfo.deviceType,ut.context.deviceInfo.clientType,ut.context.deviceInfo.os,a]}ut.context.callbackManager.callCallback(u.SEND_TRACKING_DATA_STATUS_CALLBACK,e,r)},$e.prototype.callCallback=function(r){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];function a(e){return e&&"null"!==e&&4<e.length?e:window.location.href}setTimeout(function(){switch(h.a.debug("Call callback: "+r+"(): ",i),r){case u.RELOAD_STATUS_CALLBACK:location.reload();break;case u.OPEN_IFRAME_STATUS_CALLBACK:createIFrame(i[1],i[2]);var e=i[0]+"&"+R.param({redirect_url:a(i[3])}),t=document.getElementsByName("mvpdframe");0<t.length?(h.a.debug("Using an iFrame. iFrame URL: ",e),t[0].setAttribute("src",e)):(h.a.debug("Using a Pop-Up window. Pop-Up window URL: ",e),p.openLoginWindow(e,"mvpdframe",ut.getInstance().completeBackgroundLogin));break;case u.NAVIGATE_TO_URL_STATUS_CALLBACK:var n=i[0]+"&"+R.param({redirect_url:a(i[1])});h.a.debug("navigateToUrl:",n),i[2]?p.openLoginWindow(n,"mvpdwindow",ut.getInstance().completeBackgroundLogin):window.location.href=n;break;case u.DO_BACKGROUND_LOGOUT_STATUS_CALLBACK:p.createHiddenIframe("com_adobe_pass_background_logout",i[0]);break;default:var o=window.eval.call(window,r);if(void 0===o)return void h.a.warn("Callback < "+r+" > is NOT implemented");o.apply(window,i)}},4)},$e.validate=function(e){if(1024<e.length)throw new TypeError("InvalidArgumentError");if(null==e.match(/^[0-9a-zA-Z][-._a-zA-Z0-9]*$/))throw new TypeError("InvalidArgumentError")},Je([Qe],$e.prototype,"callCallback",null),$e);function $e(){this.callbackMap={}}var et=(tt.getInstance=function(){return this.instance||(this.instance=new tt),this.instance},Object.defineProperty(tt.prototype,"clientInfo",{get:function(){return this._clientInfo},set:function(e){this._clientInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"deviceInfo",{get:function(){return this._deviceInfo},set:function(e){this._deviceInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"requestorId",{get:function(){return this._requestorId},set:function(e){this._requestorId=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"validRequestorId",{get:function(){return this._validRequestorId},set:function(e){this._validRequestorId=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"proxyURL",{get:function(){return this._proxyURL},set:function(e){this._proxyURL=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"spUrl",{get:function(){return this._spUrl},set:function(e){this._spUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"spAdobeServicesUrl",{get:function(){return this._spAdobeServicesUrl},set:function(e){this._spAdobeServicesUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"cachedAuthorization",{get:function(){return this._cachedAuthorization},set:function(e){this._cachedAuthorization=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"cachedAuthentication",{get:function(){return this._cachedAuthentication},set:function(e){this._cachedAuthentication=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"backgroundLoginInProgress",{get:function(){return this._backgroundLoginInProgress},set:function(e){this._backgroundLoginInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"backgroundLogoutInProgress",{get:function(){return this._backgroundLogoutInProgress},set:function(e){this._backgroundLogoutInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"interactiveAuthenticationInProgress",{get:function(){return this._interactiveAuthenticationInProgress},set:function(e){this._interactiveAuthenticationInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"nonInteractiveAuthenticationInProgress",{get:function(){return this._nonInteractiveAuthenticationInProgress},set:function(e){this._nonInteractiveAuthenticationInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"methodInvokingAuthorization",{get:function(){return this._methodInvokingAuthorization},set:function(e){this._methodInvokingAuthorization=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"pendingAuthorizationInProgress",{get:function(){return this._pendingAuthorizationInProgress},set:function(e){this._pendingAuthorizationInProgress=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"authorizationExtraParameters",{get:function(){return this._authorizationExtraParameters},set:function(e){this._authorizationExtraParameters=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"authenticationExtraParameters",{get:function(){return this._authenticationExtraParameters},set:function(e){this._authenticationExtraParameters=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"passiveAuthenticationTimer",{get:function(){return this._passiveAuthenticationTimer},set:function(e){this._passiveAuthenticationTimer=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"passiveAuthenticationTimerMilliseconds",{get:function(){return this._passiveAuthenticationTimerMilliseconds},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"resourceId",{get:function(){return this._resourceId},set:function(e){this._resourceId=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"redirectUrl",{get:function(){return this._redirectUrl},set:function(e){this._redirectUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt,"pendingCallsQueue",{get:function(){return this._pendingCallsQueue},set:function(e){this._pendingCallsQueue=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"configurationService",{get:function(){return this._configurationService},set:function(e){this._configurationService=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"userProfileService",{get:function(){return this._userProfileService},set:function(e){this._userProfileService=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"decisionService",{get:function(){return this._decisionService},set:function(e){this._decisionService=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"logoutService",{get:function(){return this._logoutService},set:function(e){this._logoutService=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"mvpdManager",{get:function(){return this._mvpdManager},set:function(e){this._mvpdManager=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"storageManager",{get:function(){return this._storageManager},set:function(e){this._storageManager=e},enumerable:!1,configurable:!0}),Object.defineProperty(tt.prototype,"callbackManager",{get:function(){return this._callbackManager},set:function(e){this._callbackManager=e},enumerable:!1,configurable:!0}),tt.prototype.configureServiceProviderUrl=function(e){null!=e&&e.match(/(.*)-staging.(.*)/)?this.spUrl="sp.auth-staging.adobe.com":this.spUrl="sp.auth.adobe.com",this.spAdobeServicesUrl="https://"+this.spUrl+"/adobe-services",h.a.info("Running against service provider: "+this.spUrl)},tt._pendingCallsQueue=[],tt);function tt(){this._clientInfo=null,this._deviceInfo={deviceType:"",clientType:"",os:""},this._requestorId=null,this._validRequestorId=!1,this._resourceId=null,this._redirectUrl=null,this._cachedAuthentication=!0,this._cachedAuthorization=!1,this._backgroundLoginInProgress=!1,this._backgroundLogoutInProgress=!1,this._nonInteractiveAuthenticationInProgress=!1,this._interactiveAuthenticationInProgress=!1,this._pendingAuthorizationInProgress=!1,this._methodInvokingAuthorization=null,this._authenticationExtraParameters=null,this._authorizationExtraParameters=null,this._passiveAuthenticationTimerMilliseconds=3e4,this._passiveAuthenticationTimer=null,this.configurationService=new nt,this.userProfileService=new Ne,this.decisionService=new qe,this.logoutService=new je,this.mvpdManager=W.getInstance(),this.storageManager=Ue.getInstance(),this.callbackManager=Xe.getInstance()}var nt=(ot.prototype.retrieveConfiguration=function(e){var t=this;ot.numberOfConfigCalls++,e&&Array.isArray(e)&&0<e.length&&ut.context.configureServiceProviderUrl(e[0]),Ve.getInstance().get(c.CONFIG_ENDPOINT_PATH+"/"+ut.context.requestorId,{},{dataType:"xml"}).then(function(e){return t.onRetrieveConfiguration(e.data,e.status)},function(e){return t.onRetrieveConfiguration(e.data,e.status)})},ot.prototype.onRetrieveConfiguration=function(e,t){if(--ot.numberOfConfigCalls,200!==t){if(ut.context.validRequestorId=!1,t===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS)return void ut.context.callbackManager.onErrorHandler(e);if(h.a.error("Invalid configuration response: HTTP",t),ut.context.callbackManager.onErrorHandler(0===t?L.SEC420:L.buildError(L.PREFIX_CFG+t)),410===t)return void ut.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,l.SERVER_API_TOO_OLD_ERROR_STATUS)}else ut.context.validRequestorId=!0;A.checkPendingLogout(e)&&ut.context.storageManager.ditchTokens();var n=0;S.getNode("time",e)&&(n=parseInt(S.getNodeText("time",e),10),h.a.debug("Server time:",n));var o,r=(new Date).getTime();n&&0<n&&(59e3<(o=r-n)||o<-59e3)&&ut.context.callbackManager.onErrorHandler(L.CFG100),""===ut.context.deviceInfo.deviceType&&S.getNode("device",e)&&(ut.context.deviceInfo.deviceType=S.getNodeText("device",e)),""===ut.context.deviceInfo.clientType&&S.getNode("clientType",e)&&(ut.context.deviceInfo.clientType=S.getNodeText("clientType",e)),""===ut.context.deviceInfo.os&&S.getNode("os",e)&&(ut.context.deviceInfo.os=S.getNodeText("os",e));var i=new D(e),a=i.getMvpds();ut.context.clientInfo.callSetConfig()&&(ot.configurationString=i.getConfigForProgrammer());for(var s=0,c=a;s<c.length;s++)c[s].serviceProvider=ut.context.spUrl;W.getInstance().addMvpds(a),!0===J.a.isPendingAuthenticationCookieSet()?(J.a.setPendingAuthenticationCookieState(!1),ut.context.userProfileService.retrieveAuthenticationToken(function(e){return ut.context.userProfileService.onAuthenticationTokenSuccessful(e)},function(e,t,n,o){return ut.context.userProfileService.onAuthenticationTokenError(e,t,n,o)})):0===ot.numberOfConfigCalls&&(h.a.debug("Configuration INITIALIZED"),this.onConfigurationInitialized())},ot.prototype.onConfigurationInitialized=function(){var e=ut.context.mvpdManager.getCurrentSP();P.isEmpty(e)||ut.context.configureServiceProviderUrl(e);var t=ut.context.mvpdManager.getCurrentMvpdID(),n=ut.context.mvpdManager.getMvpdByID(t);ut.context.mvpdManager.switchToCurrentMvpdStorageType(t),n&&n.authPerAggregator&&n.passiveAuthnEnabled&&null===ut.context.storageManager.getAuthenticationToken()&&ut.context.storageManager.searchForFirstValidAuthenticationTokenForCurrentMvpd()?(ut.context.callbackManager.onErrorHandler(L.N001),ut.context.userProfileService.startPassiveAuthentication()):this.onConfigurationInitializedComplete()},ot.prototype.onConfigurationInitializedComplete=function(){var e;p.removeGenericEventListener("configInit",this.onConfigurationInitialized),ot.configurationInitialized=!0,ut.context.clientInfo&&ut.context.clientInfo.callSetConfig()&&(e=(e=ot.configurationString)||"",ut.context.callbackManager.callCallback(u.CONFIGURATION_STATUS_CALLBACK,e));for(var t=0,n=et.pendingCallsQueue;t<n.length;t++){var o=n[t];h.a.debug("Executing pending call: ",o),o.execute()}et.pendingCallsQueue.length=0},ot.configurationInitialized=!1,ot.configurationString=null,ot.numberOfConfigCalls=0,ot);function ot(){}var rt=(it.prototype.callSetConfig=function(){return this.clientInfo.callSetConfig},it.prototype.getVisitorID=function(){return this.clientInfo.visitorID},it.prototype.getAdID=function(){return this.clientInfo.adID},it.prototype.isBackgroundLogin=function(){return this.clientInfo.backgroundLogin},it.prototype.isBackgroundLogout=function(){return this.clientInfo.backgroundLogout},it.prototype.getMvpdConfig=function(){return this.mvpdConfigs},it.prototype.isIFrameRequiredForMvpd=function(e){var t=this.mvpdConfigs[e];return t?t.iFrameRequired:null},it.prototype.parseClientInfo=function(e){for(var t in this.clientInfo)e&&e.hasOwnProperty(t)&&typeof this.clientInfo[t]==typeof e[t]&&(this.clientInfo[t]=e[t])},it.prototype.parseMvpdConfig=function(e){var t=e&&e.mvpdConfig;if(!P.isEmpty(t))for(var n in h.a.debug(t),t)if(t.hasOwnProperty(n)){var o=t[n],r={};for(var i in this.mvpdConfigDefault)o&&o.hasOwnProperty(i)&&typeof this.mvpdConfigDefault[i]==typeof o[i]&&(r[i]=o[i]);r!=={}&&(this.mvpdConfigs[n]=P.extend({},this.mvpdConfigDefault,r))}},it);function it(e){this.info=e,this.clientInfo={callSetConfig:!1,backgroundLogin:!1,backgroundLogout:!1,visitorID:"",adID:""},this.mvpdConfigs={},this.mvpdConfigDefault={iFrameRequired:!1,iFrameWidth:0,iFrameHeight:0},this.parseClientInfo(e),this.parseMvpdConfig(e),h.a.debug("Parsed ClientInfo data",this.clientInfo,this.mvpdConfigs)}var at=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(a=(i<3?r(a):3<i?r(t,n,a):r(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a},st=i(5),ct=i(2),ut=(lt.getInstance=function(e){return this.instance||(this.instance=new lt(e)),this.instance},lt.prototype.loadAccessEnablerProxy=function(){var e=this,t=function(){if(e._scriptUrl)switch(e._scriptUrl.hostname){case"entitlement.auth.adobe.com":return h.a.info("Environment: PRODUCTION"),"sp.auth.adobe.com";case"entitlement.auth-staging.adobe.com":return h.a.info("Environment: STAGING"),"sp.auth-staging.adobe.com";default:return h.a.info("Environment: CUSTOM"),e._scriptUrl.host}}();h.a.info("Loading AccessEnablerProxy.js from: "+t);var n=this._scriptUrl.pathname.replace("AccessEnabler.js","");Ke.globalOptions.proxyURL="https://"+t+n+"AccessEnablerProxy.html";var o=Ke.globalOptions.proxyURL+"?"+i.h;p.isDebug(this._scriptUrl)&&(o+="&debug"),o+="#"+encodeURIComponent(document.location.href),window.accessEnablerProxy=document.createElement("iframe"),accessEnablerProxy.setAttribute("name","adobeIFrame"),accessEnablerProxy.setAttribute("id","adobeIFrame"),accessEnablerProxy.setAttribute("style","display:none"),accessEnablerProxy.setAttribute("src",o),S.appendChild(accessEnablerProxy)},lt.prototype.completeBackgroundLogin=function(){h.a.debug("Completing background login!");var e=lt.context.mvpdManager.getCurrentMvpd();e&&e.iFrameRequired&&!e.tempPass&&lt.context.callbackManager.callCallback(u.DESTROY_IFRAME_STATUS_CALLBACK),lt.context.userProfileService.retrieveAuthenticationToken(function(e){return lt.context.userProfileService.onAuthenticationTokenSuccessful(e)},function(e,t,n,o){return lt.context.userProfileService.onAuthenticationTokenError(e,t,n,o)})},lt.prototype.completePassiveLogin=function(){h.a.debug("Completing passive login!"),lt.context.userProfileService.completePassiveAuthentication()},lt.prototype.completeBackgroundLogout=function(){h.a.debug("[LOGOUT] Completing background logout."),lt.context.backgroundLogoutInProgress=!1,lt.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,0,""),lt.context.callbackManager.onErrorHandler(L.N000)},Object.defineProperty(lt.prototype,"softwareStatement",{get:function(){return this._softwareStatement},enumerable:!1,configurable:!0}),lt.prototype.setRequestor=function(e){void 0===e&&(e="");for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];P.isEmpty(Ue.error)||(lt.context.callbackManager.onErrorHandler(Ue.error),Ue.error=null);var o=null,r={};st(t,function(e){Array.isArray(e)?o=e:r=e}),r.callSetConfig="function"==typeof setConfig,lt.context.clientInfo=new rt(r);var i=lt.context.clientInfo.getVisitorID();P.isEmpty(i)||(Ke.globalData[s.KEY_VISITOR_ID]=i);var a=lt.context.clientInfo.getAdID();P.isEmpty(a)||(Ke.globalData[s.KEY_AD_ID]=a),Ne.CACHE=null,lt.context.requestorId=String(e),h.a.debug("Processing setRequestor(): ",lt.context.requestorId,o),lt.context.mvpdManager.clearRequestorMVPDs(),lt.context.configurationService.retrieveConfiguration(o)},lt.prototype.setSelectedProvider=function(e){nt.configurationInitialized?(h.a.debug("Processing setSelectedProvider(): ",e),e&&0<e.length?lt.context.interactiveAuthenticationInProgress?(lt.context.mvpdManager.setCurrentMvpdID(e),lt.context.storageManager.setMvpdSelection(Y.USER_SELECTION),lt.context.callbackManager.sendTrackingData(l.TRACK_MVPD_SELECTION),lt.context.userProfileService.goToMvpdLoginPage()):(String(e)===lt.context.mvpdManager.getCurrentMvpdID()?lt.context.callbackManager.callCallback(u.AUTHENTICATION_STATUS_CALLBACK,1,l.PROVIDER_ALREADY_AUTHENTICATED_INFO_STATUS):lt.context.userProfileService.sendAuthenticationFailCallbacks(l.USER_NOT_AUTHENTICATED_GENERIC_ERROR_STATUS,L.N500),lt.context.userProfileService.authenticationGeneralCleanup()):(lt.context.mvpdManager.setCurrentMvpdID(null),lt.context.storageManager.setMvpdSelection(Y.UNKNOWN_SELECTION),lt.context.userProfileService.sendAuthenticationFailCallbacks(l.PROVIDER_NOT_SELECTED_ERROR_STATUS,L.N005),lt.context.userProfileService.authenticationGeneralCleanup())):(h.a.debug("Put setSelectedProvider() in call queue"),et.pendingCallsQueue.push(new d(this,this.setSelectedProvider,e)))},lt.prototype.getSelectedProvider=function(){var e,t,n,o;nt.configurationInitialized?(h.a.debug("Processing getSelectedProvider()"),e="New User",!(t=lt.context.mvpdManager.getCurrentMvpdID())||(n=lt.context.storageManager.getAuthenticationToken())&&((o=n.getSubMVPDID())&&""!==o&&(t=o),e=n.isValid()?"User Authenticated":"User Not Authenticated"),lt.context.callbackManager.callCallback(u.SEND_SELECTED_MVPD_STATUS_CALLBACK,{MVPD:t,AE_State:e})):(h.a.debug("Put getSelectedProvider() in call queue"),et.pendingCallsQueue.push(new d(this,this.getSelectedProvider)))},lt.prototype.getProxyMVPD=function(){var e,t,n,o;nt.configurationInitialized?(h.a.debug("Processing getProxyMVPD()"),e=null,(t=lt.context.storageManager.getAuthenticationToken())&&(n=t.getMvpdID(),o=t.getSubMVPDID(),n&&o&&""!==n&&""!==o&&(e=n)),lt.context.callbackManager.callCallback(u.SEND_SELECTED_MVPD_PROXY_STATUS_CALLBACK,e)):(h.a.debug("Put getProxyMVPD() in call queue"),et.pendingCallsQueue.push(new d(this,this.getProxyMVPD)))},lt.prototype.autoLogin=function(e){nt.configurationInitialized?(h.a.debug("Processing autoLogin(): ",e),lt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?lt.context.userProfileService.sendAuthenticationSuccessCallbacks():e&&e.mvpdID&&lt.context.mvpdManager.isMvpdValid(e.mvpdID)?lt.context.userProfileService.startNonInteractiveAuthentication(e.mvpdID):lt.context.userProfileService.sendAuthenticationFailCallbacks(l.PROVIDER_NOT_AVAILABLE_ERROR_STATUS,L.N404)):(h.a.debug("Put autoLogin() in call queue"),et.pendingCallsQueue.push(new d(this,this.autoLogin,e)))},lt.prototype.getAuthentication=function(e,t){void 0===e&&(e=void 0),void 0===t&&(t=void 0),nt.configurationInitialized?(h.a.debug("Processing getAuthentication(): ",e,t),e&&(lt.context.redirectUrl=e),t&&(lt.context.authenticationExtraParameters=t),lt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?lt.context.userProfileService.sendAuthenticationSuccessCallbacks():lt.context.userProfileService.startInteractiveAuthentication()):(h.a.debug("Put getAuthentication() in call queue"),et.pendingCallsQueue.push(new d(this,this.getAuthentication,e,t)))},lt.prototype.checkAuthentication=function(){var e,t;nt.configurationInitialized?(h.a.debug("Processing checkAuthentication()"),(e=lt.context.userProfileService.getClientAuthenticationStatus())===l.USER_AUTHENTICATED_STATUS?(lt.context.mvpdManager.getMvpdByID(lt.context.storageManager.getMvpdID()).tempPass&&lt.context.callbackManager.onErrorHandler(L.N011),lt.context.storageManager.getAuthenticationToken().isAuthNAll()&&lt.context.callbackManager.onErrorHandler(L.N010),lt.context.userProfileService.sendAuthenticationSuccessCallbacks()):(t=e===l.USER_NOT_AUTHENTICATED_ERROR_STATUS?L.N000:L.N500,lt.context.userProfileService.sendAuthenticationFailCallbacks(e,t))):(h.a.debug("Put checkAuthentication() in call queue"),et.pendingCallsQueue.push(new d(this,this.checkAuthentication)))},lt.prototype.getAuthorization=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0),nt.configurationInitialized?(h.a.debug("Processing getAuthorization(): ",e,t,n),lt.context.resourceId=e,lt.context.authorizationExtraParameters=n,lt.context.methodInvokingAuthorization="getAuthorization",lt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?lt.context.decisionService.startAuthorization(lt.context.resourceId,lt.context.authorizationExtraParameters):(lt.context.pendingAuthorizationInProgress=!0,this.getAuthentication([t,lt.context.authorizationExtraParameters]))):(h.a.debug("Put getAuthorization() in call queue"),et.pendingCallsQueue.push(new d(this,this.getAuthorization,e,t,n)))},lt.prototype.checkAuthorization=function(e,t){void 0===t&&(t=void 0),nt.configurationInitialized?(h.a.debug("Processing checkAuthorization(): ",e,t),lt.context.resourceId=e,lt.context.authorizationExtraParameters=t,lt.context.methodInvokingAuthorization="checkAuthorization",lt.context.userProfileService.getClientAuthenticationStatus()===l.USER_AUTHENTICATED_STATUS?lt.context.decisionService.startAuthorization(lt.context.resourceId,lt.context.authorizationExtraParameters):lt.context.decisionService.onRetrieveAuthorizationTokenError(null,null,{code:l.USER_NOT_AUTHENTICATED_ERROR_STATUS,message:"",resourceId:e})):(h.a.debug("Put checkAuthorization() in call queue"),et.pendingCallsQueue.push(new d(this,this.checkAuthorization,e,t)))},lt.prototype.checkPreauthorizedResources=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=!0),nt.configurationInitialized){h.a.debug("Processing retrievePreauthorizationDecisions(): ",e,t);var n=lt.context.storageManager.getAuthenticationToken();if(n&&n.isValid()){var i,o=n.getAuthorizedResources();if(o&&0<o.length){for(var r=[],a=0,s=o.length;a<s;a++)r.push(o[a].getAuthorizedResourceID().toUpperCase());var c=lt.context.decisionService.intersectPreflight(e,r);lt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,c)}else t&&lt.context.decisionService.requestedResourcesEqualsPreauthorizationCache(e)?lt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,lt.context.decisionService.getAuthorizedResourcesFromPreauthorizationCache()):(i=function(e,t){t===L.MISSING_REQUIRED_PREREQUISITES_ERROR_STATUS?(h.a.warn("/preauthorize call was not made - returning empty preauthorizedResources array"),lt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,[]),lt.context.callbackManager.onErrorHandler(e)):(h.a.warn("/preauthorize call failed - returning empty preauthorizedResources array"),lt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,[]),lt.context.callbackManager.onErrorHandler(L.P100))},lt.context.decisionService.retrievePreauthorizationDecisions(e,function(e,t){var n,o,r;200===t?(n=[],o=[],e&&(r=S.getNodes("resource",e),st(r,function(e){var t={id:S.getNodeText("id",e),authorized:"true"===S.getNodeText("authorized",e).toLowerCase()};n.push(t),t.authorized&&o.push(t.id)})),lt.context.storageManager.setPreauthorizationCache(n),lt.context.callbackManager.callCallback(u.PREAUTHORIZATION_STATUS_CALLBACK,o)):i(e,t)},i))}}else h.a.debug("Put retrievePreauthorizationDecisions() in call queue"),et.pendingCallsQueue.push(new d(this,this.checkPreauthorizedResources,e,t))},lt.prototype.getMetadata=function(e,t){void 0===t&&(t=[]),nt.configurationInitialized?(h.a.debug("Processing getMetadata(): ",e,t),lt.context.storageManager.getAuthenticationToken()?lt.context.userProfileService.getValue(e,t):lt.context.callbackManager.callCallback(u.METADATA_STATUS_CALLBACK,e,null,null)):(h.a.debug("Put getMetadata() in call queue"),et.pendingCallsQueue.push(new d(this,this.getMetadata,e,t)))},lt.prototype.logout=function(){var e;nt.configurationInitialized?(h.a.debug("Processing logout()"),lt.context.userProfileService.authenticationGeneralCleanup(),lt.context.decisionService.authorizationGeneralCleanup(),e=lt.context.storageManager.getAuthenticationToken(),lt.context.validRequestorId&&lt.context.storageManager.ditchTokens(),lt.context.logoutService.logout(e)):(h.a.debug("Put logout() in call queue"),et.pendingCallsQueue.push(new d(this,this.logout)))},lt.prototype.bind=function(e,t){void 0===t&&(t=void 0),h.a.debug("bind("+e+", "+t+")"),lt.context.callbackManager.bind(e,t)},lt.prototype.unbind=function(e,t){void 0===t&&(t=void 0),h.a.debug("unbind("+e+", "+t+")"),lt.context.callbackManager.unbind(e,t)},lt.prototype.getStorageData=function(){lt.context.callbackManager.callCallback(u.SEND_STORAGE_DATA_STATUS_CALLBACK,lt.context.storageManager.getStorageData())},at([Qe],lt.prototype,"setRequestor",null),at([Qe],lt.prototype,"setSelectedProvider",null),at([Qe],lt.prototype,"getSelectedProvider",null),at([Qe],lt.prototype,"getProxyMVPD",null),at([Qe],lt.prototype,"autoLogin",null),at([Qe],lt.prototype,"getAuthentication",null),at([Qe],lt.prototype,"checkAuthentication",null),at([Qe],lt.prototype,"getAuthorization",null),at([Qe],lt.prototype,"checkAuthorization",null),at([Qe],lt.prototype,"checkPreauthorizedResources",null),at([Qe],lt.prototype,"getMetadata",null),at([Qe],lt.prototype,"logout",null),at([Qe],lt.prototype,"bind",null),at([Qe],lt.prototype,"unbind",null),at([Qe],lt.prototype,"getStorageData",null),lt);function lt(e){var t=this;this.completeAccessEnablerProxyLoading=function(){lt.context=et.getInstance(),null!=t._scriptUrl?lt.context.configureServiceProviderUrl(t._scriptUrl.host):lt.context.configureServiceProviderUrl(null),lt.context.storageManager.syncStorage().then(function(){h.a.debug("Initial storage sync complete!"),lt.context.callbackManager.callCallback(u.ACCESS_ENABLER_LIBRARY_LOADED_STATUS_CALLBACK)})},this._softwareStatement=e,this._scriptUrl=new ct(C.get(),null,!0),h.a.info("Version: 4.3.1-e723131 "+(p.isDebug(this._scriptUrl)?"DEBUG":"RELEASE")),h.a.setLevel(p.isDebug(this._scriptUrl)?1:4),p.addGenericEventListener("message",function(e){return p.receiveMessageEventHandler(e,{PROXY_LOADED:t.completeAccessEnablerProxyLoading,LOGIN_COMPLETE:t.completeBackgroundLogin,LOGOUT_COMPLETE:t.completeBackgroundLogout,PASSIVE_AUTHN_COMPLETE:t.completePassiveLogin})}),this.loadAccessEnablerProxy()}var dt=i(2),gt=(ht.prototype.loadAccessEnablerService=function(e){var o=ut.getInstance(e),t=this;for(var n in o._api_methods)!function(n){o._api_methods.hasOwnProperty(n)&&(t[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o[n].apply(o,e)})}(n);this.version="4.3.1-e723131"},ht);function ht(e){var t=this;h.a.setPrefix("AccessEnabler.js");var n,o=new dt(C.get(),null,!0);i.p=o.protocol+"//"+o.host+o.pathname.replace("AccessEnabler.js",""),"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?this.loadAccessEnablerService(e):(h.a.warn("Non standards compliant browser! Loading polyfills."),(n=document.createElement("script")).src=i.p+"/polyfill.js",n.onload=function(){t.loadAccessEnablerService(e)},n.onerror=function(){h.a.error("Failed to load polyfills!"),t.loadAccessEnablerService(e)},document.head.appendChild(n))}}]);
//# sourceMappingURL=AccessEnabler.js.map